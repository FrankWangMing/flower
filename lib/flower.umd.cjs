(function(kn,On){typeof exports=="object"&&typeof module<"u"?On(exports):typeof define=="function"&&define.amd?define(["exports"],On):(kn=typeof globalThis<"u"?globalThis:kn||self,On(kn.flower={}))})(this,(function(kn){"use strict";var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},me={exports:{}};var Za=me.exports,as;function Xa(){return as||(as=1,(function(Y,t){(function(){var e,s="4.17.21",a=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",d="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",m=500,x="__lodash_placeholder__",M=1,S=2,A=4,w=1,b=2,T=1,C=2,U=4,W=8,q=16,z=32,F=64,D=128,it=256,et=512,ot=30,G="...",_t=800,mt=16,pt=1,V=2,kt=3,Gt=1/0,Ft=9007199254740991,Ze=17976931348623157e292,Nn=NaN,gn=4294967295,wf=gn-1,Af=gn>>>1,Ef=[["ary",D],["bind",T],["bindKey",C],["curry",W],["curryRight",q],["flip",et],["partial",z],["partialRight",F],["rearg",it]],te="[object Arguments]",Xe="[object Array]",Sf="[object AsyncFunction]",Me="[object Boolean]",ye="[object Date]",Tf="[object DOMException]",$e="[object Error]",Je="[object Function]",gs="[object GeneratorFunction]",an="[object Map]",we="[object Number]",bf="[object Null]",vn="[object Object]",ms="[object Promise]",Lf="[object Proxy]",Ae="[object RegExp]",fn="[object Set]",Ee="[object String]",Ve="[object Symbol]",Of="[object Undefined]",Se="[object WeakMap]",Rf="[object WeakSet]",Te="[object ArrayBuffer]",ne="[object DataView]",Wr="[object Float32Array]",Nr="[object Float64Array]",Hr="[object Int8Array]",Yr="[object Int16Array]",Gr="[object Int32Array]",Kr="[object Uint8Array]",Zr="[object Uint8ClampedArray]",Xr="[object Uint16Array]",$r="[object Uint32Array]",If=/\b__p \+= '';/g,Cf=/\b(__p \+=) '' \+/g,zf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xs=/&(?:amp|lt|gt|quot|#39);/g,_s=/[&<>"']/g,Pf=RegExp(xs.source),Df=RegExp(_s.source),Uf=/<%-([\s\S]+?)%>/g,qf=/<%([\s\S]+?)%>/g,vs=/<%=([\s\S]+?)%>/g,Ff=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bf=/^\w*$/,Wf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jr=/[\\^$.*+?()[\]{}|]/g,Nf=RegExp(Jr.source),Vr=/^\s+/,Hf=/\s/,Yf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Gf=/\{\n\/\* \[wrapped with (.+)\] \*/,Kf=/,? & /,Zf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xf=/[()=,{}\[\]\/\s]/,$f=/\\(\\)?/g,Jf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ms=/\w*$/,Vf=/^[-+]0x[0-9a-f]+$/i,kf=/^0b[01]+$/i,Qf=/^\[object .+?Constructor\]$/,jf=/^0o[0-7]+$/i,th=/^(?:0|[1-9]\d*)$/,nh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ke=/($^)/,eh=/['\n\r\u2028\u2029\\]/g,Qe="\\ud800-\\udfff",rh="\\u0300-\\u036f",ih="\\ufe20-\\ufe2f",sh="\\u20d0-\\u20ff",ys=rh+ih+sh,ws="\\u2700-\\u27bf",As="a-z\\xdf-\\xf6\\xf8-\\xff",ch="\\xac\\xb1\\xd7\\xf7",ah="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fh="\\u2000-\\u206f",hh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Es="A-Z\\xc0-\\xd6\\xd8-\\xde",Ss="\\ufe0e\\ufe0f",Ts=ch+ah+fh+hh,kr="['’]",oh="["+Qe+"]",bs="["+Ts+"]",je="["+ys+"]",Ls="\\d+",lh="["+ws+"]",Os="["+As+"]",Rs="[^"+Qe+Ts+Ls+ws+As+Es+"]",Qr="\\ud83c[\\udffb-\\udfff]",uh="(?:"+je+"|"+Qr+")",Is="[^"+Qe+"]",jr="(?:\\ud83c[\\udde6-\\uddff]){2}",ti="[\\ud800-\\udbff][\\udc00-\\udfff]",ee="["+Es+"]",Cs="\\u200d",zs="(?:"+Os+"|"+Rs+")",dh="(?:"+ee+"|"+Rs+")",Ps="(?:"+kr+"(?:d|ll|m|re|s|t|ve))?",Ds="(?:"+kr+"(?:D|LL|M|RE|S|T|VE))?",Us=uh+"?",qs="["+Ss+"]?",ph="(?:"+Cs+"(?:"+[Is,jr,ti].join("|")+")"+qs+Us+")*",gh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fs=qs+Us+ph,xh="(?:"+[lh,jr,ti].join("|")+")"+Fs,_h="(?:"+[Is+je+"?",je,jr,ti,oh].join("|")+")",vh=RegExp(kr,"g"),Mh=RegExp(je,"g"),ni=RegExp(Qr+"(?="+Qr+")|"+_h+Fs,"g"),yh=RegExp([ee+"?"+Os+"+"+Ps+"(?="+[bs,ee,"$"].join("|")+")",dh+"+"+Ds+"(?="+[bs,ee+zs,"$"].join("|")+")",ee+"?"+zs+"+"+Ps,ee+"+"+Ds,mh,gh,Ls,xh].join("|"),"g"),wh=RegExp("["+Cs+Qe+ys+Ss+"]"),Ah=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Eh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sh=-1,yt={};yt[Wr]=yt[Nr]=yt[Hr]=yt[Yr]=yt[Gr]=yt[Kr]=yt[Zr]=yt[Xr]=yt[$r]=!0,yt[te]=yt[Xe]=yt[Te]=yt[Me]=yt[ne]=yt[ye]=yt[$e]=yt[Je]=yt[an]=yt[we]=yt[vn]=yt[Ae]=yt[fn]=yt[Ee]=yt[Se]=!1;var Mt={};Mt[te]=Mt[Xe]=Mt[Te]=Mt[ne]=Mt[Me]=Mt[ye]=Mt[Wr]=Mt[Nr]=Mt[Hr]=Mt[Yr]=Mt[Gr]=Mt[an]=Mt[we]=Mt[vn]=Mt[Ae]=Mt[fn]=Mt[Ee]=Mt[Ve]=Mt[Kr]=Mt[Zr]=Mt[Xr]=Mt[$r]=!0,Mt[$e]=Mt[Je]=Mt[Se]=!1;var Th={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},bh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Oh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rh=parseFloat,Ih=parseInt,Bs=typeof On=="object"&&On&&On.Object===Object&&On,Ch=typeof self=="object"&&self&&self.Object===Object&&self,It=Bs||Ch||Function("return this")(),ei=t&&!t.nodeType&&t,Hn=ei&&!0&&Y&&!Y.nodeType&&Y,Ws=Hn&&Hn.exports===ei,ri=Ws&&Bs.process,Qt=(function(){try{var v=Hn&&Hn.require&&Hn.require("util").types;return v||ri&&ri.binding&&ri.binding("util")}catch{}})(),Ns=Qt&&Qt.isArrayBuffer,Hs=Qt&&Qt.isDate,Ys=Qt&&Qt.isMap,Gs=Qt&&Qt.isRegExp,Ks=Qt&&Qt.isSet,Zs=Qt&&Qt.isTypedArray;function Kt(v,L,E){switch(E.length){case 0:return v.call(L);case 1:return v.call(L,E[0]);case 2:return v.call(L,E[0],E[1]);case 3:return v.call(L,E[0],E[1],E[2])}return v.apply(L,E)}function zh(v,L,E,B){for(var Q=-1,ut=v==null?0:v.length;++Q<ut;){var Lt=v[Q];L(B,Lt,E(Lt),v)}return B}function jt(v,L){for(var E=-1,B=v==null?0:v.length;++E<B&&L(v[E],E,v)!==!1;);return v}function Ph(v,L){for(var E=v==null?0:v.length;E--&&L(v[E],E,v)!==!1;);return v}function Xs(v,L){for(var E=-1,B=v==null?0:v.length;++E<B;)if(!L(v[E],E,v))return!1;return!0}function Cn(v,L){for(var E=-1,B=v==null?0:v.length,Q=0,ut=[];++E<B;){var Lt=v[E];L(Lt,E,v)&&(ut[Q++]=Lt)}return ut}function tr(v,L){var E=v==null?0:v.length;return!!E&&re(v,L,0)>-1}function ii(v,L,E){for(var B=-1,Q=v==null?0:v.length;++B<Q;)if(E(L,v[B]))return!0;return!1}function wt(v,L){for(var E=-1,B=v==null?0:v.length,Q=Array(B);++E<B;)Q[E]=L(v[E],E,v);return Q}function zn(v,L){for(var E=-1,B=L.length,Q=v.length;++E<B;)v[Q+E]=L[E];return v}function si(v,L,E,B){var Q=-1,ut=v==null?0:v.length;for(B&&ut&&(E=v[++Q]);++Q<ut;)E=L(E,v[Q],Q,v);return E}function Dh(v,L,E,B){var Q=v==null?0:v.length;for(B&&Q&&(E=v[--Q]);Q--;)E=L(E,v[Q],Q,v);return E}function ci(v,L){for(var E=-1,B=v==null?0:v.length;++E<B;)if(L(v[E],E,v))return!0;return!1}var Uh=ai("length");function qh(v){return v.split("")}function Fh(v){return v.match(Zf)||[]}function $s(v,L,E){var B;return E(v,function(Q,ut,Lt){if(L(Q,ut,Lt))return B=ut,!1}),B}function nr(v,L,E,B){for(var Q=v.length,ut=E+(B?1:-1);B?ut--:++ut<Q;)if(L(v[ut],ut,v))return ut;return-1}function re(v,L,E){return L===L?Vh(v,L,E):nr(v,Js,E)}function Bh(v,L,E,B){for(var Q=E-1,ut=v.length;++Q<ut;)if(B(v[Q],L))return Q;return-1}function Js(v){return v!==v}function Vs(v,L){var E=v==null?0:v.length;return E?hi(v,L)/E:Nn}function ai(v){return function(L){return L==null?e:L[v]}}function fi(v){return function(L){return v==null?e:v[L]}}function ks(v,L,E,B,Q){return Q(v,function(ut,Lt,vt){E=B?(B=!1,ut):L(E,ut,Lt,vt)}),E}function Wh(v,L){var E=v.length;for(v.sort(L);E--;)v[E]=v[E].value;return v}function hi(v,L){for(var E,B=-1,Q=v.length;++B<Q;){var ut=L(v[B]);ut!==e&&(E=E===e?ut:E+ut)}return E}function oi(v,L){for(var E=-1,B=Array(v);++E<v;)B[E]=L(E);return B}function Nh(v,L){return wt(L,function(E){return[E,v[E]]})}function Qs(v){return v&&v.slice(0,ec(v)+1).replace(Vr,"")}function Zt(v){return function(L){return v(L)}}function li(v,L){return wt(L,function(E){return v[E]})}function be(v,L){return v.has(L)}function js(v,L){for(var E=-1,B=v.length;++E<B&&re(L,v[E],0)>-1;);return E}function tc(v,L){for(var E=v.length;E--&&re(L,v[E],0)>-1;);return E}function Hh(v,L){for(var E=v.length,B=0;E--;)v[E]===L&&++B;return B}var Yh=fi(Th),Gh=fi(bh);function Kh(v){return"\\"+Oh[v]}function Zh(v,L){return v==null?e:v[L]}function ie(v){return wh.test(v)}function Xh(v){return Ah.test(v)}function $h(v){for(var L,E=[];!(L=v.next()).done;)E.push(L.value);return E}function ui(v){var L=-1,E=Array(v.size);return v.forEach(function(B,Q){E[++L]=[Q,B]}),E}function nc(v,L){return function(E){return v(L(E))}}function Pn(v,L){for(var E=-1,B=v.length,Q=0,ut=[];++E<B;){var Lt=v[E];(Lt===L||Lt===x)&&(v[E]=x,ut[Q++]=E)}return ut}function er(v){var L=-1,E=Array(v.size);return v.forEach(function(B){E[++L]=B}),E}function Jh(v){var L=-1,E=Array(v.size);return v.forEach(function(B){E[++L]=[B,B]}),E}function Vh(v,L,E){for(var B=E-1,Q=v.length;++B<Q;)if(v[B]===L)return B;return-1}function kh(v,L,E){for(var B=E+1;B--;)if(v[B]===L)return B;return B}function se(v){return ie(v)?jh(v):Uh(v)}function hn(v){return ie(v)?t1(v):qh(v)}function ec(v){for(var L=v.length;L--&&Hf.test(v.charAt(L)););return L}var Qh=fi(Lh);function jh(v){for(var L=ni.lastIndex=0;ni.test(v);)++L;return L}function t1(v){return v.match(ni)||[]}function n1(v){return v.match(yh)||[]}var e1=(function v(L){L=L==null?It:ce.defaults(It.Object(),L,ce.pick(It,Eh));var E=L.Array,B=L.Date,Q=L.Error,ut=L.Function,Lt=L.Math,vt=L.Object,di=L.RegExp,r1=L.String,tn=L.TypeError,rr=E.prototype,i1=ut.prototype,ae=vt.prototype,ir=L["__core-js_shared__"],sr=i1.toString,xt=ae.hasOwnProperty,s1=0,rc=(function(){var n=/[^.]+$/.exec(ir&&ir.keys&&ir.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})(),cr=ae.toString,c1=sr.call(vt),a1=It._,f1=di("^"+sr.call(xt).replace(Jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ar=Ws?L.Buffer:e,Dn=L.Symbol,fr=L.Uint8Array,ic=ar?ar.allocUnsafe:e,hr=nc(vt.getPrototypeOf,vt),sc=vt.create,cc=ae.propertyIsEnumerable,or=rr.splice,ac=Dn?Dn.isConcatSpreadable:e,Le=Dn?Dn.iterator:e,Yn=Dn?Dn.toStringTag:e,lr=(function(){try{var n=$n(vt,"defineProperty");return n({},"",{}),n}catch{}})(),h1=L.clearTimeout!==It.clearTimeout&&L.clearTimeout,o1=B&&B.now!==It.Date.now&&B.now,l1=L.setTimeout!==It.setTimeout&&L.setTimeout,ur=Lt.ceil,dr=Lt.floor,pi=vt.getOwnPropertySymbols,u1=ar?ar.isBuffer:e,fc=L.isFinite,d1=rr.join,p1=nc(vt.keys,vt),Ot=Lt.max,zt=Lt.min,g1=B.now,m1=L.parseInt,hc=Lt.random,x1=rr.reverse,gi=$n(L,"DataView"),Oe=$n(L,"Map"),mi=$n(L,"Promise"),fe=$n(L,"Set"),Re=$n(L,"WeakMap"),Ie=$n(vt,"create"),pr=Re&&new Re,he={},_1=Jn(gi),v1=Jn(Oe),M1=Jn(mi),y1=Jn(fe),w1=Jn(Re),gr=Dn?Dn.prototype:e,Ce=gr?gr.valueOf:e,oc=gr?gr.toString:e;function l(n){if(Et(n)&&!j(n)&&!(n instanceof ft)){if(n instanceof nn)return n;if(xt.call(n,"__wrapped__"))return la(n)}return new nn(n)}var oe=(function(){function n(){}return function(r){if(!At(r))return{};if(sc)return sc(r);n.prototype=r;var i=new n;return n.prototype=e,i}})();function mr(){}function nn(n,r){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=e}l.templateSettings={escape:Uf,evaluate:qf,interpolate:vs,variable:"",imports:{_:l}},l.prototype=mr.prototype,l.prototype.constructor=l,nn.prototype=oe(mr.prototype),nn.prototype.constructor=nn;function ft(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=gn,this.__views__=[]}function A1(){var n=new ft(this.__wrapped__);return n.__actions__=Bt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Bt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Bt(this.__views__),n}function E1(){if(this.__filtered__){var n=new ft(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function S1(){var n=this.__wrapped__.value(),r=this.__dir__,i=j(n),c=r<0,h=i?n.length:0,u=Fo(0,h,this.__views__),g=u.start,_=u.end,y=_-g,O=c?_:g-1,R=this.__iteratees__,I=R.length,P=0,N=zt(y,this.__takeCount__);if(!i||!c&&h==y&&N==y)return Pc(n,this.__actions__);var X=[];t:for(;y--&&P<N;){O+=r;for(var rt=-1,$=n[O];++rt<I;){var at=R[rt],ht=at.iteratee,Jt=at.type,qt=ht($);if(Jt==V)$=qt;else if(!qt){if(Jt==pt)continue t;break t}}X[P++]=$}return X}ft.prototype=oe(mr.prototype),ft.prototype.constructor=ft;function Gn(n){var r=-1,i=n==null?0:n.length;for(this.clear();++r<i;){var c=n[r];this.set(c[0],c[1])}}function T1(){this.__data__=Ie?Ie(null):{},this.size=0}function b1(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r}function L1(n){var r=this.__data__;if(Ie){var i=r[n];return i===p?e:i}return xt.call(r,n)?r[n]:e}function O1(n){var r=this.__data__;return Ie?r[n]!==e:xt.call(r,n)}function R1(n,r){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=Ie&&r===e?p:r,this}Gn.prototype.clear=T1,Gn.prototype.delete=b1,Gn.prototype.get=L1,Gn.prototype.has=O1,Gn.prototype.set=R1;function Mn(n){var r=-1,i=n==null?0:n.length;for(this.clear();++r<i;){var c=n[r];this.set(c[0],c[1])}}function I1(){this.__data__=[],this.size=0}function C1(n){var r=this.__data__,i=xr(r,n);if(i<0)return!1;var c=r.length-1;return i==c?r.pop():or.call(r,i,1),--this.size,!0}function z1(n){var r=this.__data__,i=xr(r,n);return i<0?e:r[i][1]}function P1(n){return xr(this.__data__,n)>-1}function D1(n,r){var i=this.__data__,c=xr(i,n);return c<0?(++this.size,i.push([n,r])):i[c][1]=r,this}Mn.prototype.clear=I1,Mn.prototype.delete=C1,Mn.prototype.get=z1,Mn.prototype.has=P1,Mn.prototype.set=D1;function yn(n){var r=-1,i=n==null?0:n.length;for(this.clear();++r<i;){var c=n[r];this.set(c[0],c[1])}}function U1(){this.size=0,this.__data__={hash:new Gn,map:new(Oe||Mn),string:new Gn}}function q1(n){var r=Or(this,n).delete(n);return this.size-=r?1:0,r}function F1(n){return Or(this,n).get(n)}function B1(n){return Or(this,n).has(n)}function W1(n,r){var i=Or(this,n),c=i.size;return i.set(n,r),this.size+=i.size==c?0:1,this}yn.prototype.clear=U1,yn.prototype.delete=q1,yn.prototype.get=F1,yn.prototype.has=B1,yn.prototype.set=W1;function Kn(n){var r=-1,i=n==null?0:n.length;for(this.__data__=new yn;++r<i;)this.add(n[r])}function N1(n){return this.__data__.set(n,p),this}function H1(n){return this.__data__.has(n)}Kn.prototype.add=Kn.prototype.push=N1,Kn.prototype.has=H1;function on(n){var r=this.__data__=new Mn(n);this.size=r.size}function Y1(){this.__data__=new Mn,this.size=0}function G1(n){var r=this.__data__,i=r.delete(n);return this.size=r.size,i}function K1(n){return this.__data__.get(n)}function Z1(n){return this.__data__.has(n)}function X1(n,r){var i=this.__data__;if(i instanceof Mn){var c=i.__data__;if(!Oe||c.length<a-1)return c.push([n,r]),this.size=++i.size,this;i=this.__data__=new yn(c)}return i.set(n,r),this.size=i.size,this}on.prototype.clear=Y1,on.prototype.delete=G1,on.prototype.get=K1,on.prototype.has=Z1,on.prototype.set=X1;function lc(n,r){var i=j(n),c=!i&&Vn(n),h=!i&&!c&&Wn(n),u=!i&&!c&&!h&&pe(n),g=i||c||h||u,_=g?oi(n.length,r1):[],y=_.length;for(var O in n)(r||xt.call(n,O))&&!(g&&(O=="length"||h&&(O=="offset"||O=="parent")||u&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||Sn(O,y)))&&_.push(O);return _}function uc(n){var r=n.length;return r?n[bi(0,r-1)]:e}function $1(n,r){return Rr(Bt(n),Zn(r,0,n.length))}function J1(n){return Rr(Bt(n))}function xi(n,r,i){(i!==e&&!ln(n[r],i)||i===e&&!(r in n))&&wn(n,r,i)}function ze(n,r,i){var c=n[r];(!(xt.call(n,r)&&ln(c,i))||i===e&&!(r in n))&&wn(n,r,i)}function xr(n,r){for(var i=n.length;i--;)if(ln(n[i][0],r))return i;return-1}function V1(n,r,i,c){return Un(n,function(h,u,g){r(c,h,i(h),g)}),c}function dc(n,r){return n&&xn(r,Rt(r),n)}function k1(n,r){return n&&xn(r,Nt(r),n)}function wn(n,r,i){r=="__proto__"&&lr?lr(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}function _i(n,r){for(var i=-1,c=r.length,h=E(c),u=n==null;++i<c;)h[i]=u?e:Qi(n,r[i]);return h}function Zn(n,r,i){return n===n&&(i!==e&&(n=n<=i?n:i),r!==e&&(n=n>=r?n:r)),n}function en(n,r,i,c,h,u){var g,_=r&M,y=r&S,O=r&A;if(i&&(g=h?i(n,c,h,u):i(n)),g!==e)return g;if(!At(n))return n;var R=j(n);if(R){if(g=Wo(n),!_)return Bt(n,g)}else{var I=Pt(n),P=I==Je||I==gs;if(Wn(n))return qc(n,_);if(I==vn||I==te||P&&!h){if(g=y||P?{}:ea(n),!_)return y?Oo(n,k1(g,n)):Lo(n,dc(g,n))}else{if(!Mt[I])return h?n:{};g=No(n,I,_)}}u||(u=new on);var N=u.get(n);if(N)return N;u.set(n,g),Ia(n)?n.forEach(function($){g.add(en($,r,i,$,n,u))}):Oa(n)&&n.forEach(function($,at){g.set(at,en($,r,i,at,n,u))});var X=O?y?Fi:qi:y?Nt:Rt,rt=R?e:X(n);return jt(rt||n,function($,at){rt&&(at=$,$=n[at]),ze(g,at,en($,r,i,at,n,u))}),g}function Q1(n){var r=Rt(n);return function(i){return pc(i,n,r)}}function pc(n,r,i){var c=i.length;if(n==null)return!c;for(n=vt(n);c--;){var h=i[c],u=r[h],g=n[h];if(g===e&&!(h in n)||!u(g))return!1}return!0}function gc(n,r,i){if(typeof n!="function")throw new tn(o);return We(function(){n.apply(e,i)},r)}function Pe(n,r,i,c){var h=-1,u=tr,g=!0,_=n.length,y=[],O=r.length;if(!_)return y;i&&(r=wt(r,Zt(i))),c?(u=ii,g=!1):r.length>=a&&(u=be,g=!1,r=new Kn(r));t:for(;++h<_;){var R=n[h],I=i==null?R:i(R);if(R=c||R!==0?R:0,g&&I===I){for(var P=O;P--;)if(r[P]===I)continue t;y.push(R)}else u(r,I,c)||y.push(R)}return y}var Un=Hc(mn),mc=Hc(Mi,!0);function j1(n,r){var i=!0;return Un(n,function(c,h,u){return i=!!r(c,h,u),i}),i}function _r(n,r,i){for(var c=-1,h=n.length;++c<h;){var u=n[c],g=r(u);if(g!=null&&(_===e?g===g&&!$t(g):i(g,_)))var _=g,y=u}return y}function to(n,r,i,c){var h=n.length;for(i=nt(i),i<0&&(i=-i>h?0:h+i),c=c===e||c>h?h:nt(c),c<0&&(c+=h),c=i>c?0:za(c);i<c;)n[i++]=r;return n}function xc(n,r){var i=[];return Un(n,function(c,h,u){r(c,h,u)&&i.push(c)}),i}function Ct(n,r,i,c,h){var u=-1,g=n.length;for(i||(i=Yo),h||(h=[]);++u<g;){var _=n[u];r>0&&i(_)?r>1?Ct(_,r-1,i,c,h):zn(h,_):c||(h[h.length]=_)}return h}var vi=Yc(),_c=Yc(!0);function mn(n,r){return n&&vi(n,r,Rt)}function Mi(n,r){return n&&_c(n,r,Rt)}function vr(n,r){return Cn(r,function(i){return Tn(n[i])})}function Xn(n,r){r=Fn(r,n);for(var i=0,c=r.length;n!=null&&i<c;)n=n[_n(r[i++])];return i&&i==c?n:e}function vc(n,r,i){var c=r(n);return j(n)?c:zn(c,i(n))}function Dt(n){return n==null?n===e?Of:bf:Yn&&Yn in vt(n)?qo(n):Vo(n)}function yi(n,r){return n>r}function no(n,r){return n!=null&&xt.call(n,r)}function eo(n,r){return n!=null&&r in vt(n)}function ro(n,r,i){return n>=zt(r,i)&&n<Ot(r,i)}function wi(n,r,i){for(var c=i?ii:tr,h=n[0].length,u=n.length,g=u,_=E(u),y=1/0,O=[];g--;){var R=n[g];g&&r&&(R=wt(R,Zt(r))),y=zt(R.length,y),_[g]=!i&&(r||h>=120&&R.length>=120)?new Kn(g&&R):e}R=n[0];var I=-1,P=_[0];t:for(;++I<h&&O.length<y;){var N=R[I],X=r?r(N):N;if(N=i||N!==0?N:0,!(P?be(P,X):c(O,X,i))){for(g=u;--g;){var rt=_[g];if(!(rt?be(rt,X):c(n[g],X,i)))continue t}P&&P.push(X),O.push(N)}}return O}function io(n,r,i,c){return mn(n,function(h,u,g){r(c,i(h),u,g)}),c}function De(n,r,i){r=Fn(r,n),n=ca(n,r);var c=n==null?n:n[_n(sn(r))];return c==null?e:Kt(c,n,i)}function Mc(n){return Et(n)&&Dt(n)==te}function so(n){return Et(n)&&Dt(n)==Te}function co(n){return Et(n)&&Dt(n)==ye}function Ue(n,r,i,c,h){return n===r?!0:n==null||r==null||!Et(n)&&!Et(r)?n!==n&&r!==r:ao(n,r,i,c,Ue,h)}function ao(n,r,i,c,h,u){var g=j(n),_=j(r),y=g?Xe:Pt(n),O=_?Xe:Pt(r);y=y==te?vn:y,O=O==te?vn:O;var R=y==vn,I=O==vn,P=y==O;if(P&&Wn(n)){if(!Wn(r))return!1;g=!0,R=!1}if(P&&!R)return u||(u=new on),g||pe(n)?jc(n,r,i,c,h,u):Do(n,r,y,i,c,h,u);if(!(i&w)){var N=R&&xt.call(n,"__wrapped__"),X=I&&xt.call(r,"__wrapped__");if(N||X){var rt=N?n.value():n,$=X?r.value():r;return u||(u=new on),h(rt,$,i,c,u)}}return P?(u||(u=new on),Uo(n,r,i,c,h,u)):!1}function fo(n){return Et(n)&&Pt(n)==an}function Ai(n,r,i,c){var h=i.length,u=h,g=!c;if(n==null)return!u;for(n=vt(n);h--;){var _=i[h];if(g&&_[2]?_[1]!==n[_[0]]:!(_[0]in n))return!1}for(;++h<u;){_=i[h];var y=_[0],O=n[y],R=_[1];if(g&&_[2]){if(O===e&&!(y in n))return!1}else{var I=new on;if(c)var P=c(O,R,y,n,r,I);if(!(P===e?Ue(R,O,w|b,c,I):P))return!1}}return!0}function yc(n){if(!At(n)||Ko(n))return!1;var r=Tn(n)?f1:Qf;return r.test(Jn(n))}function ho(n){return Et(n)&&Dt(n)==Ae}function oo(n){return Et(n)&&Pt(n)==fn}function lo(n){return Et(n)&&Ur(n.length)&&!!yt[Dt(n)]}function wc(n){return typeof n=="function"?n:n==null?Ht:typeof n=="object"?j(n)?Sc(n[0],n[1]):Ec(n):Ga(n)}function Ei(n){if(!Be(n))return p1(n);var r=[];for(var i in vt(n))xt.call(n,i)&&i!="constructor"&&r.push(i);return r}function uo(n){if(!At(n))return Jo(n);var r=Be(n),i=[];for(var c in n)c=="constructor"&&(r||!xt.call(n,c))||i.push(c);return i}function Si(n,r){return n<r}function Ac(n,r){var i=-1,c=Wt(n)?E(n.length):[];return Un(n,function(h,u,g){c[++i]=r(h,u,g)}),c}function Ec(n){var r=Wi(n);return r.length==1&&r[0][2]?ia(r[0][0],r[0][1]):function(i){return i===n||Ai(i,n,r)}}function Sc(n,r){return Hi(n)&&ra(r)?ia(_n(n),r):function(i){var c=Qi(i,n);return c===e&&c===r?ji(i,n):Ue(r,c,w|b)}}function Mr(n,r,i,c,h){n!==r&&vi(r,function(u,g){if(h||(h=new on),At(u))po(n,r,g,i,Mr,c,h);else{var _=c?c(Gi(n,g),u,g+"",n,r,h):e;_===e&&(_=u),xi(n,g,_)}},Nt)}function po(n,r,i,c,h,u,g){var _=Gi(n,i),y=Gi(r,i),O=g.get(y);if(O){xi(n,i,O);return}var R=u?u(_,y,i+"",n,r,g):e,I=R===e;if(I){var P=j(y),N=!P&&Wn(y),X=!P&&!N&&pe(y);R=y,P||N||X?j(_)?R=_:St(_)?R=Bt(_):N?(I=!1,R=qc(y,!0)):X?(I=!1,R=Fc(y,!0)):R=[]:Ne(y)||Vn(y)?(R=_,Vn(_)?R=Pa(_):(!At(_)||Tn(_))&&(R=ea(y))):I=!1}I&&(g.set(y,R),h(R,y,c,u,g),g.delete(y)),xi(n,i,R)}function Tc(n,r){var i=n.length;if(i)return r+=r<0?i:0,Sn(r,i)?n[r]:e}function bc(n,r,i){r.length?r=wt(r,function(u){return j(u)?function(g){return Xn(g,u.length===1?u[0]:u)}:u}):r=[Ht];var c=-1;r=wt(r,Zt(K()));var h=Ac(n,function(u,g,_){var y=wt(r,function(O){return O(u)});return{criteria:y,index:++c,value:u}});return Wh(h,function(u,g){return bo(u,g,i)})}function go(n,r){return Lc(n,r,function(i,c){return ji(n,c)})}function Lc(n,r,i){for(var c=-1,h=r.length,u={};++c<h;){var g=r[c],_=Xn(n,g);i(_,g)&&qe(u,Fn(g,n),_)}return u}function mo(n){return function(r){return Xn(r,n)}}function Ti(n,r,i,c){var h=c?Bh:re,u=-1,g=r.length,_=n;for(n===r&&(r=Bt(r)),i&&(_=wt(n,Zt(i)));++u<g;)for(var y=0,O=r[u],R=i?i(O):O;(y=h(_,R,y,c))>-1;)_!==n&&or.call(_,y,1),or.call(n,y,1);return n}function Oc(n,r){for(var i=n?r.length:0,c=i-1;i--;){var h=r[i];if(i==c||h!==u){var u=h;Sn(h)?or.call(n,h,1):Ri(n,h)}}return n}function bi(n,r){return n+dr(hc()*(r-n+1))}function xo(n,r,i,c){for(var h=-1,u=Ot(ur((r-n)/(i||1)),0),g=E(u);u--;)g[c?u:++h]=n,n+=i;return g}function Li(n,r){var i="";if(!n||r<1||r>Ft)return i;do r%2&&(i+=n),r=dr(r/2),r&&(n+=n);while(r);return i}function st(n,r){return Ki(sa(n,r,Ht),n+"")}function _o(n){return uc(ge(n))}function vo(n,r){var i=ge(n);return Rr(i,Zn(r,0,i.length))}function qe(n,r,i,c){if(!At(n))return n;r=Fn(r,n);for(var h=-1,u=r.length,g=u-1,_=n;_!=null&&++h<u;){var y=_n(r[h]),O=i;if(y==="__proto__"||y==="constructor"||y==="prototype")return n;if(h!=g){var R=_[y];O=c?c(R,y,_):e,O===e&&(O=At(R)?R:Sn(r[h+1])?[]:{})}ze(_,y,O),_=_[y]}return n}var Rc=pr?function(n,r){return pr.set(n,r),n}:Ht,Mo=lr?function(n,r){return lr(n,"toString",{configurable:!0,enumerable:!1,value:ns(r),writable:!0})}:Ht;function yo(n){return Rr(ge(n))}function rn(n,r,i){var c=-1,h=n.length;r<0&&(r=-r>h?0:h+r),i=i>h?h:i,i<0&&(i+=h),h=r>i?0:i-r>>>0,r>>>=0;for(var u=E(h);++c<h;)u[c]=n[c+r];return u}function wo(n,r){var i;return Un(n,function(c,h,u){return i=r(c,h,u),!i}),!!i}function yr(n,r,i){var c=0,h=n==null?c:n.length;if(typeof r=="number"&&r===r&&h<=Af){for(;c<h;){var u=c+h>>>1,g=n[u];g!==null&&!$t(g)&&(i?g<=r:g<r)?c=u+1:h=u}return h}return Oi(n,r,Ht,i)}function Oi(n,r,i,c){var h=0,u=n==null?0:n.length;if(u===0)return 0;r=i(r);for(var g=r!==r,_=r===null,y=$t(r),O=r===e;h<u;){var R=dr((h+u)/2),I=i(n[R]),P=I!==e,N=I===null,X=I===I,rt=$t(I);if(g)var $=c||X;else O?$=X&&(c||P):_?$=X&&P&&(c||!N):y?$=X&&P&&!N&&(c||!rt):N||rt?$=!1:$=c?I<=r:I<r;$?h=R+1:u=R}return zt(u,wf)}function Ic(n,r){for(var i=-1,c=n.length,h=0,u=[];++i<c;){var g=n[i],_=r?r(g):g;if(!i||!ln(_,y)){var y=_;u[h++]=g===0?0:g}}return u}function Cc(n){return typeof n=="number"?n:$t(n)?Nn:+n}function Xt(n){if(typeof n=="string")return n;if(j(n))return wt(n,Xt)+"";if($t(n))return oc?oc.call(n):"";var r=n+"";return r=="0"&&1/n==-Gt?"-0":r}function qn(n,r,i){var c=-1,h=tr,u=n.length,g=!0,_=[],y=_;if(i)g=!1,h=ii;else if(u>=a){var O=r?null:zo(n);if(O)return er(O);g=!1,h=be,y=new Kn}else y=r?[]:_;t:for(;++c<u;){var R=n[c],I=r?r(R):R;if(R=i||R!==0?R:0,g&&I===I){for(var P=y.length;P--;)if(y[P]===I)continue t;r&&y.push(I),_.push(R)}else h(y,I,i)||(y!==_&&y.push(I),_.push(R))}return _}function Ri(n,r){return r=Fn(r,n),n=ca(n,r),n==null||delete n[_n(sn(r))]}function zc(n,r,i,c){return qe(n,r,i(Xn(n,r)),c)}function wr(n,r,i,c){for(var h=n.length,u=c?h:-1;(c?u--:++u<h)&&r(n[u],u,n););return i?rn(n,c?0:u,c?u+1:h):rn(n,c?u+1:0,c?h:u)}function Pc(n,r){var i=n;return i instanceof ft&&(i=i.value()),si(r,function(c,h){return h.func.apply(h.thisArg,zn([c],h.args))},i)}function Ii(n,r,i){var c=n.length;if(c<2)return c?qn(n[0]):[];for(var h=-1,u=E(c);++h<c;)for(var g=n[h],_=-1;++_<c;)_!=h&&(u[h]=Pe(u[h]||g,n[_],r,i));return qn(Ct(u,1),r,i)}function Dc(n,r,i){for(var c=-1,h=n.length,u=r.length,g={};++c<h;){var _=c<u?r[c]:e;i(g,n[c],_)}return g}function Ci(n){return St(n)?n:[]}function zi(n){return typeof n=="function"?n:Ht}function Fn(n,r){return j(n)?n:Hi(n,r)?[n]:oa(gt(n))}var Ao=st;function Bn(n,r,i){var c=n.length;return i=i===e?c:i,!r&&i>=c?n:rn(n,r,i)}var Uc=h1||function(n){return It.clearTimeout(n)};function qc(n,r){if(r)return n.slice();var i=n.length,c=ic?ic(i):new n.constructor(i);return n.copy(c),c}function Pi(n){var r=new n.constructor(n.byteLength);return new fr(r).set(new fr(n)),r}function Eo(n,r){var i=r?Pi(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}function So(n){var r=new n.constructor(n.source,Ms.exec(n));return r.lastIndex=n.lastIndex,r}function To(n){return Ce?vt(Ce.call(n)):{}}function Fc(n,r){var i=r?Pi(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}function Bc(n,r){if(n!==r){var i=n!==e,c=n===null,h=n===n,u=$t(n),g=r!==e,_=r===null,y=r===r,O=$t(r);if(!_&&!O&&!u&&n>r||u&&g&&y&&!_&&!O||c&&g&&y||!i&&y||!h)return 1;if(!c&&!u&&!O&&n<r||O&&i&&h&&!c&&!u||_&&i&&h||!g&&h||!y)return-1}return 0}function bo(n,r,i){for(var c=-1,h=n.criteria,u=r.criteria,g=h.length,_=i.length;++c<g;){var y=Bc(h[c],u[c]);if(y){if(c>=_)return y;var O=i[c];return y*(O=="desc"?-1:1)}}return n.index-r.index}function Wc(n,r,i,c){for(var h=-1,u=n.length,g=i.length,_=-1,y=r.length,O=Ot(u-g,0),R=E(y+O),I=!c;++_<y;)R[_]=r[_];for(;++h<g;)(I||h<u)&&(R[i[h]]=n[h]);for(;O--;)R[_++]=n[h++];return R}function Nc(n,r,i,c){for(var h=-1,u=n.length,g=-1,_=i.length,y=-1,O=r.length,R=Ot(u-_,0),I=E(R+O),P=!c;++h<R;)I[h]=n[h];for(var N=h;++y<O;)I[N+y]=r[y];for(;++g<_;)(P||h<u)&&(I[N+i[g]]=n[h++]);return I}function Bt(n,r){var i=-1,c=n.length;for(r||(r=E(c));++i<c;)r[i]=n[i];return r}function xn(n,r,i,c){var h=!i;i||(i={});for(var u=-1,g=r.length;++u<g;){var _=r[u],y=c?c(i[_],n[_],_,i,n):e;y===e&&(y=n[_]),h?wn(i,_,y):ze(i,_,y)}return i}function Lo(n,r){return xn(n,Ni(n),r)}function Oo(n,r){return xn(n,ta(n),r)}function Ar(n,r){return function(i,c){var h=j(i)?zh:V1,u=r?r():{};return h(i,n,K(c,2),u)}}function le(n){return st(function(r,i){var c=-1,h=i.length,u=h>1?i[h-1]:e,g=h>2?i[2]:e;for(u=n.length>3&&typeof u=="function"?(h--,u):e,g&&Ut(i[0],i[1],g)&&(u=h<3?e:u,h=1),r=vt(r);++c<h;){var _=i[c];_&&n(r,_,c,u)}return r})}function Hc(n,r){return function(i,c){if(i==null)return i;if(!Wt(i))return n(i,c);for(var h=i.length,u=r?h:-1,g=vt(i);(r?u--:++u<h)&&c(g[u],u,g)!==!1;);return i}}function Yc(n){return function(r,i,c){for(var h=-1,u=vt(r),g=c(r),_=g.length;_--;){var y=g[n?_:++h];if(i(u[y],y,u)===!1)break}return r}}function Ro(n,r,i){var c=r&T,h=Fe(n);function u(){var g=this&&this!==It&&this instanceof u?h:n;return g.apply(c?i:this,arguments)}return u}function Gc(n){return function(r){r=gt(r);var i=ie(r)?hn(r):e,c=i?i[0]:r.charAt(0),h=i?Bn(i,1).join(""):r.slice(1);return c[n]()+h}}function ue(n){return function(r){return si(Ha(Na(r).replace(vh,"")),n,"")}}function Fe(n){return function(){var r=arguments;switch(r.length){case 0:return new n;case 1:return new n(r[0]);case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[1],r[2]);case 4:return new n(r[0],r[1],r[2],r[3]);case 5:return new n(r[0],r[1],r[2],r[3],r[4]);case 6:return new n(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new n(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var i=oe(n.prototype),c=n.apply(i,r);return At(c)?c:i}}function Io(n,r,i){var c=Fe(n);function h(){for(var u=arguments.length,g=E(u),_=u,y=de(h);_--;)g[_]=arguments[_];var O=u<3&&g[0]!==y&&g[u-1]!==y?[]:Pn(g,y);if(u-=O.length,u<i)return Jc(n,r,Er,h.placeholder,e,g,O,e,e,i-u);var R=this&&this!==It&&this instanceof h?c:n;return Kt(R,this,g)}return h}function Kc(n){return function(r,i,c){var h=vt(r);if(!Wt(r)){var u=K(i,3);r=Rt(r),i=function(_){return u(h[_],_,h)}}var g=n(r,i,c);return g>-1?h[u?r[g]:g]:e}}function Zc(n){return En(function(r){var i=r.length,c=i,h=nn.prototype.thru;for(n&&r.reverse();c--;){var u=r[c];if(typeof u!="function")throw new tn(o);if(h&&!g&&Lr(u)=="wrapper")var g=new nn([],!0)}for(c=g?c:i;++c<i;){u=r[c];var _=Lr(u),y=_=="wrapper"?Bi(u):e;y&&Yi(y[0])&&y[1]==(D|W|z|it)&&!y[4].length&&y[9]==1?g=g[Lr(y[0])].apply(g,y[3]):g=u.length==1&&Yi(u)?g[_]():g.thru(u)}return function(){var O=arguments,R=O[0];if(g&&O.length==1&&j(R))return g.plant(R).value();for(var I=0,P=i?r[I].apply(this,O):R;++I<i;)P=r[I].call(this,P);return P}})}function Er(n,r,i,c,h,u,g,_,y,O){var R=r&D,I=r&T,P=r&C,N=r&(W|q),X=r&et,rt=P?e:Fe(n);function $(){for(var at=arguments.length,ht=E(at),Jt=at;Jt--;)ht[Jt]=arguments[Jt];if(N)var qt=de($),Vt=Hh(ht,qt);if(c&&(ht=Wc(ht,c,h,N)),u&&(ht=Nc(ht,u,g,N)),at-=Vt,N&&at<O){var Tt=Pn(ht,qt);return Jc(n,r,Er,$.placeholder,i,ht,Tt,_,y,O-at)}var un=I?i:this,Ln=P?un[n]:n;return at=ht.length,_?ht=ko(ht,_):X&&at>1&&ht.reverse(),R&&y<at&&(ht.length=y),this&&this!==It&&this instanceof $&&(Ln=rt||Fe(Ln)),Ln.apply(un,ht)}return $}function Xc(n,r){return function(i,c){return io(i,n,r(c),{})}}function Sr(n,r){return function(i,c){var h;if(i===e&&c===e)return r;if(i!==e&&(h=i),c!==e){if(h===e)return c;typeof i=="string"||typeof c=="string"?(i=Xt(i),c=Xt(c)):(i=Cc(i),c=Cc(c)),h=n(i,c)}return h}}function Di(n){return En(function(r){return r=wt(r,Zt(K())),st(function(i){var c=this;return n(r,function(h){return Kt(h,c,i)})})})}function Tr(n,r){r=r===e?" ":Xt(r);var i=r.length;if(i<2)return i?Li(r,n):r;var c=Li(r,ur(n/se(r)));return ie(r)?Bn(hn(c),0,n).join(""):c.slice(0,n)}function Co(n,r,i,c){var h=r&T,u=Fe(n);function g(){for(var _=-1,y=arguments.length,O=-1,R=c.length,I=E(R+y),P=this&&this!==It&&this instanceof g?u:n;++O<R;)I[O]=c[O];for(;y--;)I[O++]=arguments[++_];return Kt(P,h?i:this,I)}return g}function $c(n){return function(r,i,c){return c&&typeof c!="number"&&Ut(r,i,c)&&(i=c=e),r=bn(r),i===e?(i=r,r=0):i=bn(i),c=c===e?r<i?1:-1:bn(c),xo(r,i,c,n)}}function br(n){return function(r,i){return typeof r=="string"&&typeof i=="string"||(r=cn(r),i=cn(i)),n(r,i)}}function Jc(n,r,i,c,h,u,g,_,y,O){var R=r&W,I=R?g:e,P=R?e:g,N=R?u:e,X=R?e:u;r|=R?z:F,r&=~(R?F:z),r&U||(r&=-4);var rt=[n,r,h,N,I,X,P,_,y,O],$=i.apply(e,rt);return Yi(n)&&aa($,rt),$.placeholder=c,fa($,n,r)}function Ui(n){var r=Lt[n];return function(i,c){if(i=cn(i),c=c==null?0:zt(nt(c),292),c&&fc(i)){var h=(gt(i)+"e").split("e"),u=r(h[0]+"e"+(+h[1]+c));return h=(gt(u)+"e").split("e"),+(h[0]+"e"+(+h[1]-c))}return r(i)}}var zo=fe&&1/er(new fe([,-0]))[1]==Gt?function(n){return new fe(n)}:is;function Vc(n){return function(r){var i=Pt(r);return i==an?ui(r):i==fn?Jh(r):Nh(r,n(r))}}function An(n,r,i,c,h,u,g,_){var y=r&C;if(!y&&typeof n!="function")throw new tn(o);var O=c?c.length:0;if(O||(r&=-97,c=h=e),g=g===e?g:Ot(nt(g),0),_=_===e?_:nt(_),O-=h?h.length:0,r&F){var R=c,I=h;c=h=e}var P=y?e:Bi(n),N=[n,r,i,c,h,R,I,u,g,_];if(P&&$o(N,P),n=N[0],r=N[1],i=N[2],c=N[3],h=N[4],_=N[9]=N[9]===e?y?0:n.length:Ot(N[9]-O,0),!_&&r&(W|q)&&(r&=-25),!r||r==T)var X=Ro(n,r,i);else r==W||r==q?X=Io(n,r,_):(r==z||r==(T|z))&&!h.length?X=Co(n,r,i,c):X=Er.apply(e,N);var rt=P?Rc:aa;return fa(rt(X,N),n,r)}function kc(n,r,i,c){return n===e||ln(n,ae[i])&&!xt.call(c,i)?r:n}function Qc(n,r,i,c,h,u){return At(n)&&At(r)&&(u.set(r,n),Mr(n,r,e,Qc,u),u.delete(r)),n}function Po(n){return Ne(n)?e:n}function jc(n,r,i,c,h,u){var g=i&w,_=n.length,y=r.length;if(_!=y&&!(g&&y>_))return!1;var O=u.get(n),R=u.get(r);if(O&&R)return O==r&&R==n;var I=-1,P=!0,N=i&b?new Kn:e;for(u.set(n,r),u.set(r,n);++I<_;){var X=n[I],rt=r[I];if(c)var $=g?c(rt,X,I,r,n,u):c(X,rt,I,n,r,u);if($!==e){if($)continue;P=!1;break}if(N){if(!ci(r,function(at,ht){if(!be(N,ht)&&(X===at||h(X,at,i,c,u)))return N.push(ht)})){P=!1;break}}else if(!(X===rt||h(X,rt,i,c,u))){P=!1;break}}return u.delete(n),u.delete(r),P}function Do(n,r,i,c,h,u,g){switch(i){case ne:if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)return!1;n=n.buffer,r=r.buffer;case Te:return!(n.byteLength!=r.byteLength||!u(new fr(n),new fr(r)));case Me:case ye:case we:return ln(+n,+r);case $e:return n.name==r.name&&n.message==r.message;case Ae:case Ee:return n==r+"";case an:var _=ui;case fn:var y=c&w;if(_||(_=er),n.size!=r.size&&!y)return!1;var O=g.get(n);if(O)return O==r;c|=b,g.set(n,r);var R=jc(_(n),_(r),c,h,u,g);return g.delete(n),R;case Ve:if(Ce)return Ce.call(n)==Ce.call(r)}return!1}function Uo(n,r,i,c,h,u){var g=i&w,_=qi(n),y=_.length,O=qi(r),R=O.length;if(y!=R&&!g)return!1;for(var I=y;I--;){var P=_[I];if(!(g?P in r:xt.call(r,P)))return!1}var N=u.get(n),X=u.get(r);if(N&&X)return N==r&&X==n;var rt=!0;u.set(n,r),u.set(r,n);for(var $=g;++I<y;){P=_[I];var at=n[P],ht=r[P];if(c)var Jt=g?c(ht,at,P,r,n,u):c(at,ht,P,n,r,u);if(!(Jt===e?at===ht||h(at,ht,i,c,u):Jt)){rt=!1;break}$||($=P=="constructor")}if(rt&&!$){var qt=n.constructor,Vt=r.constructor;qt!=Vt&&"constructor"in n&&"constructor"in r&&!(typeof qt=="function"&&qt instanceof qt&&typeof Vt=="function"&&Vt instanceof Vt)&&(rt=!1)}return u.delete(n),u.delete(r),rt}function En(n){return Ki(sa(n,e,pa),n+"")}function qi(n){return vc(n,Rt,Ni)}function Fi(n){return vc(n,Nt,ta)}var Bi=pr?function(n){return pr.get(n)}:is;function Lr(n){for(var r=n.name+"",i=he[r],c=xt.call(he,r)?i.length:0;c--;){var h=i[c],u=h.func;if(u==null||u==n)return h.name}return r}function de(n){var r=xt.call(l,"placeholder")?l:n;return r.placeholder}function K(){var n=l.iteratee||es;return n=n===es?wc:n,arguments.length?n(arguments[0],arguments[1]):n}function Or(n,r){var i=n.__data__;return Go(r)?i[typeof r=="string"?"string":"hash"]:i.map}function Wi(n){for(var r=Rt(n),i=r.length;i--;){var c=r[i],h=n[c];r[i]=[c,h,ra(h)]}return r}function $n(n,r){var i=Zh(n,r);return yc(i)?i:e}function qo(n){var r=xt.call(n,Yn),i=n[Yn];try{n[Yn]=e;var c=!0}catch{}var h=cr.call(n);return c&&(r?n[Yn]=i:delete n[Yn]),h}var Ni=pi?function(n){return n==null?[]:(n=vt(n),Cn(pi(n),function(r){return cc.call(n,r)}))}:ss,ta=pi?function(n){for(var r=[];n;)zn(r,Ni(n)),n=hr(n);return r}:ss,Pt=Dt;(gi&&Pt(new gi(new ArrayBuffer(1)))!=ne||Oe&&Pt(new Oe)!=an||mi&&Pt(mi.resolve())!=ms||fe&&Pt(new fe)!=fn||Re&&Pt(new Re)!=Se)&&(Pt=function(n){var r=Dt(n),i=r==vn?n.constructor:e,c=i?Jn(i):"";if(c)switch(c){case _1:return ne;case v1:return an;case M1:return ms;case y1:return fn;case w1:return Se}return r});function Fo(n,r,i){for(var c=-1,h=i.length;++c<h;){var u=i[c],g=u.size;switch(u.type){case"drop":n+=g;break;case"dropRight":r-=g;break;case"take":r=zt(r,n+g);break;case"takeRight":n=Ot(n,r-g);break}}return{start:n,end:r}}function Bo(n){var r=n.match(Gf);return r?r[1].split(Kf):[]}function na(n,r,i){r=Fn(r,n);for(var c=-1,h=r.length,u=!1;++c<h;){var g=_n(r[c]);if(!(u=n!=null&&i(n,g)))break;n=n[g]}return u||++c!=h?u:(h=n==null?0:n.length,!!h&&Ur(h)&&Sn(g,h)&&(j(n)||Vn(n)))}function Wo(n){var r=n.length,i=new n.constructor(r);return r&&typeof n[0]=="string"&&xt.call(n,"index")&&(i.index=n.index,i.input=n.input),i}function ea(n){return typeof n.constructor=="function"&&!Be(n)?oe(hr(n)):{}}function No(n,r,i){var c=n.constructor;switch(r){case Te:return Pi(n);case Me:case ye:return new c(+n);case ne:return Eo(n,i);case Wr:case Nr:case Hr:case Yr:case Gr:case Kr:case Zr:case Xr:case $r:return Fc(n,i);case an:return new c;case we:case Ee:return new c(n);case Ae:return So(n);case fn:return new c;case Ve:return To(n)}}function Ho(n,r){var i=r.length;if(!i)return n;var c=i-1;return r[c]=(i>1?"& ":"")+r[c],r=r.join(i>2?", ":" "),n.replace(Yf,`{
/* [wrapped with `+r+`] */
`)}function Yo(n){return j(n)||Vn(n)||!!(ac&&n&&n[ac])}function Sn(n,r){var i=typeof n;return r=r??Ft,!!r&&(i=="number"||i!="symbol"&&th.test(n))&&n>-1&&n%1==0&&n<r}function Ut(n,r,i){if(!At(i))return!1;var c=typeof r;return(c=="number"?Wt(i)&&Sn(r,i.length):c=="string"&&r in i)?ln(i[r],n):!1}function Hi(n,r){if(j(n))return!1;var i=typeof n;return i=="number"||i=="symbol"||i=="boolean"||n==null||$t(n)?!0:Bf.test(n)||!Ff.test(n)||r!=null&&n in vt(r)}function Go(n){var r=typeof n;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?n!=="__proto__":n===null}function Yi(n){var r=Lr(n),i=l[r];if(typeof i!="function"||!(r in ft.prototype))return!1;if(n===i)return!0;var c=Bi(i);return!!c&&n===c[0]}function Ko(n){return!!rc&&rc in n}var Zo=ir?Tn:cs;function Be(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||ae;return n===i}function ra(n){return n===n&&!At(n)}function ia(n,r){return function(i){return i==null?!1:i[n]===r&&(r!==e||n in vt(i))}}function Xo(n){var r=Pr(n,function(c){return i.size===m&&i.clear(),c}),i=r.cache;return r}function $o(n,r){var i=n[1],c=r[1],h=i|c,u=h<(T|C|D),g=c==D&&i==W||c==D&&i==it&&n[7].length<=r[8]||c==(D|it)&&r[7].length<=r[8]&&i==W;if(!(u||g))return n;c&T&&(n[2]=r[2],h|=i&T?0:U);var _=r[3];if(_){var y=n[3];n[3]=y?Wc(y,_,r[4]):_,n[4]=y?Pn(n[3],x):r[4]}return _=r[5],_&&(y=n[5],n[5]=y?Nc(y,_,r[6]):_,n[6]=y?Pn(n[5],x):r[6]),_=r[7],_&&(n[7]=_),c&D&&(n[8]=n[8]==null?r[8]:zt(n[8],r[8])),n[9]==null&&(n[9]=r[9]),n[0]=r[0],n[1]=h,n}function Jo(n){var r=[];if(n!=null)for(var i in vt(n))r.push(i);return r}function Vo(n){return cr.call(n)}function sa(n,r,i){return r=Ot(r===e?n.length-1:r,0),function(){for(var c=arguments,h=-1,u=Ot(c.length-r,0),g=E(u);++h<u;)g[h]=c[r+h];h=-1;for(var _=E(r+1);++h<r;)_[h]=c[h];return _[r]=i(g),Kt(n,this,_)}}function ca(n,r){return r.length<2?n:Xn(n,rn(r,0,-1))}function ko(n,r){for(var i=n.length,c=zt(r.length,i),h=Bt(n);c--;){var u=r[c];n[c]=Sn(u,i)?h[u]:e}return n}function Gi(n,r){if(!(r==="constructor"&&typeof n[r]=="function")&&r!="__proto__")return n[r]}var aa=ha(Rc),We=l1||function(n,r){return It.setTimeout(n,r)},Ki=ha(Mo);function fa(n,r,i){var c=r+"";return Ki(n,Ho(c,Qo(Bo(c),i)))}function ha(n){var r=0,i=0;return function(){var c=g1(),h=mt-(c-i);if(i=c,h>0){if(++r>=_t)return arguments[0]}else r=0;return n.apply(e,arguments)}}function Rr(n,r){var i=-1,c=n.length,h=c-1;for(r=r===e?c:r;++i<r;){var u=bi(i,h),g=n[u];n[u]=n[i],n[i]=g}return n.length=r,n}var oa=Xo(function(n){var r=[];return n.charCodeAt(0)===46&&r.push(""),n.replace(Wf,function(i,c,h,u){r.push(h?u.replace($f,"$1"):c||i)}),r});function _n(n){if(typeof n=="string"||$t(n))return n;var r=n+"";return r=="0"&&1/n==-Gt?"-0":r}function Jn(n){if(n!=null){try{return sr.call(n)}catch{}try{return n+""}catch{}}return""}function Qo(n,r){return jt(Ef,function(i){var c="_."+i[0];r&i[1]&&!tr(n,c)&&n.push(c)}),n.sort()}function la(n){if(n instanceof ft)return n.clone();var r=new nn(n.__wrapped__,n.__chain__);return r.__actions__=Bt(n.__actions__),r.__index__=n.__index__,r.__values__=n.__values__,r}function jo(n,r,i){(i?Ut(n,r,i):r===e)?r=1:r=Ot(nt(r),0);var c=n==null?0:n.length;if(!c||r<1)return[];for(var h=0,u=0,g=E(ur(c/r));h<c;)g[u++]=rn(n,h,h+=r);return g}function tl(n){for(var r=-1,i=n==null?0:n.length,c=0,h=[];++r<i;){var u=n[r];u&&(h[c++]=u)}return h}function nl(){var n=arguments.length;if(!n)return[];for(var r=E(n-1),i=arguments[0],c=n;c--;)r[c-1]=arguments[c];return zn(j(i)?Bt(i):[i],Ct(r,1))}var el=st(function(n,r){return St(n)?Pe(n,Ct(r,1,St,!0)):[]}),rl=st(function(n,r){var i=sn(r);return St(i)&&(i=e),St(n)?Pe(n,Ct(r,1,St,!0),K(i,2)):[]}),il=st(function(n,r){var i=sn(r);return St(i)&&(i=e),St(n)?Pe(n,Ct(r,1,St,!0),e,i):[]});function sl(n,r,i){var c=n==null?0:n.length;return c?(r=i||r===e?1:nt(r),rn(n,r<0?0:r,c)):[]}function cl(n,r,i){var c=n==null?0:n.length;return c?(r=i||r===e?1:nt(r),r=c-r,rn(n,0,r<0?0:r)):[]}function al(n,r){return n&&n.length?wr(n,K(r,3),!0,!0):[]}function fl(n,r){return n&&n.length?wr(n,K(r,3),!0):[]}function hl(n,r,i,c){var h=n==null?0:n.length;return h?(i&&typeof i!="number"&&Ut(n,r,i)&&(i=0,c=h),to(n,r,i,c)):[]}function ua(n,r,i){var c=n==null?0:n.length;if(!c)return-1;var h=i==null?0:nt(i);return h<0&&(h=Ot(c+h,0)),nr(n,K(r,3),h)}function da(n,r,i){var c=n==null?0:n.length;if(!c)return-1;var h=c-1;return i!==e&&(h=nt(i),h=i<0?Ot(c+h,0):zt(h,c-1)),nr(n,K(r,3),h,!0)}function pa(n){var r=n==null?0:n.length;return r?Ct(n,1):[]}function ol(n){var r=n==null?0:n.length;return r?Ct(n,Gt):[]}function ll(n,r){var i=n==null?0:n.length;return i?(r=r===e?1:nt(r),Ct(n,r)):[]}function ul(n){for(var r=-1,i=n==null?0:n.length,c={};++r<i;){var h=n[r];c[h[0]]=h[1]}return c}function ga(n){return n&&n.length?n[0]:e}function dl(n,r,i){var c=n==null?0:n.length;if(!c)return-1;var h=i==null?0:nt(i);return h<0&&(h=Ot(c+h,0)),re(n,r,h)}function pl(n){var r=n==null?0:n.length;return r?rn(n,0,-1):[]}var gl=st(function(n){var r=wt(n,Ci);return r.length&&r[0]===n[0]?wi(r):[]}),ml=st(function(n){var r=sn(n),i=wt(n,Ci);return r===sn(i)?r=e:i.pop(),i.length&&i[0]===n[0]?wi(i,K(r,2)):[]}),xl=st(function(n){var r=sn(n),i=wt(n,Ci);return r=typeof r=="function"?r:e,r&&i.pop(),i.length&&i[0]===n[0]?wi(i,e,r):[]});function _l(n,r){return n==null?"":d1.call(n,r)}function sn(n){var r=n==null?0:n.length;return r?n[r-1]:e}function vl(n,r,i){var c=n==null?0:n.length;if(!c)return-1;var h=c;return i!==e&&(h=nt(i),h=h<0?Ot(c+h,0):zt(h,c-1)),r===r?kh(n,r,h):nr(n,Js,h,!0)}function Ml(n,r){return n&&n.length?Tc(n,nt(r)):e}var yl=st(ma);function ma(n,r){return n&&n.length&&r&&r.length?Ti(n,r):n}function wl(n,r,i){return n&&n.length&&r&&r.length?Ti(n,r,K(i,2)):n}function Al(n,r,i){return n&&n.length&&r&&r.length?Ti(n,r,e,i):n}var El=En(function(n,r){var i=n==null?0:n.length,c=_i(n,r);return Oc(n,wt(r,function(h){return Sn(h,i)?+h:h}).sort(Bc)),c});function Sl(n,r){var i=[];if(!(n&&n.length))return i;var c=-1,h=[],u=n.length;for(r=K(r,3);++c<u;){var g=n[c];r(g,c,n)&&(i.push(g),h.push(c))}return Oc(n,h),i}function Zi(n){return n==null?n:x1.call(n)}function Tl(n,r,i){var c=n==null?0:n.length;return c?(i&&typeof i!="number"&&Ut(n,r,i)?(r=0,i=c):(r=r==null?0:nt(r),i=i===e?c:nt(i)),rn(n,r,i)):[]}function bl(n,r){return yr(n,r)}function Ll(n,r,i){return Oi(n,r,K(i,2))}function Ol(n,r){var i=n==null?0:n.length;if(i){var c=yr(n,r);if(c<i&&ln(n[c],r))return c}return-1}function Rl(n,r){return yr(n,r,!0)}function Il(n,r,i){return Oi(n,r,K(i,2),!0)}function Cl(n,r){var i=n==null?0:n.length;if(i){var c=yr(n,r,!0)-1;if(ln(n[c],r))return c}return-1}function zl(n){return n&&n.length?Ic(n):[]}function Pl(n,r){return n&&n.length?Ic(n,K(r,2)):[]}function Dl(n){var r=n==null?0:n.length;return r?rn(n,1,r):[]}function Ul(n,r,i){return n&&n.length?(r=i||r===e?1:nt(r),rn(n,0,r<0?0:r)):[]}function ql(n,r,i){var c=n==null?0:n.length;return c?(r=i||r===e?1:nt(r),r=c-r,rn(n,r<0?0:r,c)):[]}function Fl(n,r){return n&&n.length?wr(n,K(r,3),!1,!0):[]}function Bl(n,r){return n&&n.length?wr(n,K(r,3)):[]}var Wl=st(function(n){return qn(Ct(n,1,St,!0))}),Nl=st(function(n){var r=sn(n);return St(r)&&(r=e),qn(Ct(n,1,St,!0),K(r,2))}),Hl=st(function(n){var r=sn(n);return r=typeof r=="function"?r:e,qn(Ct(n,1,St,!0),e,r)});function Yl(n){return n&&n.length?qn(n):[]}function Gl(n,r){return n&&n.length?qn(n,K(r,2)):[]}function Kl(n,r){return r=typeof r=="function"?r:e,n&&n.length?qn(n,e,r):[]}function Xi(n){if(!(n&&n.length))return[];var r=0;return n=Cn(n,function(i){if(St(i))return r=Ot(i.length,r),!0}),oi(r,function(i){return wt(n,ai(i))})}function xa(n,r){if(!(n&&n.length))return[];var i=Xi(n);return r==null?i:wt(i,function(c){return Kt(r,e,c)})}var Zl=st(function(n,r){return St(n)?Pe(n,r):[]}),Xl=st(function(n){return Ii(Cn(n,St))}),$l=st(function(n){var r=sn(n);return St(r)&&(r=e),Ii(Cn(n,St),K(r,2))}),Jl=st(function(n){var r=sn(n);return r=typeof r=="function"?r:e,Ii(Cn(n,St),e,r)}),Vl=st(Xi);function kl(n,r){return Dc(n||[],r||[],ze)}function Ql(n,r){return Dc(n||[],r||[],qe)}var jl=st(function(n){var r=n.length,i=r>1?n[r-1]:e;return i=typeof i=="function"?(n.pop(),i):e,xa(n,i)});function _a(n){var r=l(n);return r.__chain__=!0,r}function t0(n,r){return r(n),n}function Ir(n,r){return r(n)}var n0=En(function(n){var r=n.length,i=r?n[0]:0,c=this.__wrapped__,h=function(u){return _i(u,n)};return r>1||this.__actions__.length||!(c instanceof ft)||!Sn(i)?this.thru(h):(c=c.slice(i,+i+(r?1:0)),c.__actions__.push({func:Ir,args:[h],thisArg:e}),new nn(c,this.__chain__).thru(function(u){return r&&!u.length&&u.push(e),u}))});function e0(){return _a(this)}function r0(){return new nn(this.value(),this.__chain__)}function i0(){this.__values__===e&&(this.__values__=Ca(this.value()));var n=this.__index__>=this.__values__.length,r=n?e:this.__values__[this.__index__++];return{done:n,value:r}}function s0(){return this}function c0(n){for(var r,i=this;i instanceof mr;){var c=la(i);c.__index__=0,c.__values__=e,r?h.__wrapped__=c:r=c;var h=c;i=i.__wrapped__}return h.__wrapped__=n,r}function a0(){var n=this.__wrapped__;if(n instanceof ft){var r=n;return this.__actions__.length&&(r=new ft(this)),r=r.reverse(),r.__actions__.push({func:Ir,args:[Zi],thisArg:e}),new nn(r,this.__chain__)}return this.thru(Zi)}function f0(){return Pc(this.__wrapped__,this.__actions__)}var h0=Ar(function(n,r,i){xt.call(n,i)?++n[i]:wn(n,i,1)});function o0(n,r,i){var c=j(n)?Xs:j1;return i&&Ut(n,r,i)&&(r=e),c(n,K(r,3))}function l0(n,r){var i=j(n)?Cn:xc;return i(n,K(r,3))}var u0=Kc(ua),d0=Kc(da);function p0(n,r){return Ct(Cr(n,r),1)}function g0(n,r){return Ct(Cr(n,r),Gt)}function m0(n,r,i){return i=i===e?1:nt(i),Ct(Cr(n,r),i)}function va(n,r){var i=j(n)?jt:Un;return i(n,K(r,3))}function Ma(n,r){var i=j(n)?Ph:mc;return i(n,K(r,3))}var x0=Ar(function(n,r,i){xt.call(n,i)?n[i].push(r):wn(n,i,[r])});function _0(n,r,i,c){n=Wt(n)?n:ge(n),i=i&&!c?nt(i):0;var h=n.length;return i<0&&(i=Ot(h+i,0)),qr(n)?i<=h&&n.indexOf(r,i)>-1:!!h&&re(n,r,i)>-1}var v0=st(function(n,r,i){var c=-1,h=typeof r=="function",u=Wt(n)?E(n.length):[];return Un(n,function(g){u[++c]=h?Kt(r,g,i):De(g,r,i)}),u}),M0=Ar(function(n,r,i){wn(n,i,r)});function Cr(n,r){var i=j(n)?wt:Ac;return i(n,K(r,3))}function y0(n,r,i,c){return n==null?[]:(j(r)||(r=r==null?[]:[r]),i=c?e:i,j(i)||(i=i==null?[]:[i]),bc(n,r,i))}var w0=Ar(function(n,r,i){n[i?0:1].push(r)},function(){return[[],[]]});function A0(n,r,i){var c=j(n)?si:ks,h=arguments.length<3;return c(n,K(r,4),i,h,Un)}function E0(n,r,i){var c=j(n)?Dh:ks,h=arguments.length<3;return c(n,K(r,4),i,h,mc)}function S0(n,r){var i=j(n)?Cn:xc;return i(n,Dr(K(r,3)))}function T0(n){var r=j(n)?uc:_o;return r(n)}function b0(n,r,i){(i?Ut(n,r,i):r===e)?r=1:r=nt(r);var c=j(n)?$1:vo;return c(n,r)}function L0(n){var r=j(n)?J1:yo;return r(n)}function O0(n){if(n==null)return 0;if(Wt(n))return qr(n)?se(n):n.length;var r=Pt(n);return r==an||r==fn?n.size:Ei(n).length}function R0(n,r,i){var c=j(n)?ci:wo;return i&&Ut(n,r,i)&&(r=e),c(n,K(r,3))}var I0=st(function(n,r){if(n==null)return[];var i=r.length;return i>1&&Ut(n,r[0],r[1])?r=[]:i>2&&Ut(r[0],r[1],r[2])&&(r=[r[0]]),bc(n,Ct(r,1),[])}),zr=o1||function(){return It.Date.now()};function C0(n,r){if(typeof r!="function")throw new tn(o);return n=nt(n),function(){if(--n<1)return r.apply(this,arguments)}}function ya(n,r,i){return r=i?e:r,r=n&&r==null?n.length:r,An(n,D,e,e,e,e,r)}function wa(n,r){var i;if(typeof r!="function")throw new tn(o);return n=nt(n),function(){return--n>0&&(i=r.apply(this,arguments)),n<=1&&(r=e),i}}var $i=st(function(n,r,i){var c=T;if(i.length){var h=Pn(i,de($i));c|=z}return An(n,c,r,i,h)}),Aa=st(function(n,r,i){var c=T|C;if(i.length){var h=Pn(i,de(Aa));c|=z}return An(r,c,n,i,h)});function Ea(n,r,i){r=i?e:r;var c=An(n,W,e,e,e,e,e,r);return c.placeholder=Ea.placeholder,c}function Sa(n,r,i){r=i?e:r;var c=An(n,q,e,e,e,e,e,r);return c.placeholder=Sa.placeholder,c}function Ta(n,r,i){var c,h,u,g,_,y,O=0,R=!1,I=!1,P=!0;if(typeof n!="function")throw new tn(o);r=cn(r)||0,At(i)&&(R=!!i.leading,I="maxWait"in i,u=I?Ot(cn(i.maxWait)||0,r):u,P="trailing"in i?!!i.trailing:P);function N(Tt){var un=c,Ln=h;return c=h=e,O=Tt,g=n.apply(Ln,un),g}function X(Tt){return O=Tt,_=We(at,r),R?N(Tt):g}function rt(Tt){var un=Tt-y,Ln=Tt-O,Ka=r-un;return I?zt(Ka,u-Ln):Ka}function $(Tt){var un=Tt-y,Ln=Tt-O;return y===e||un>=r||un<0||I&&Ln>=u}function at(){var Tt=zr();if($(Tt))return ht(Tt);_=We(at,rt(Tt))}function ht(Tt){return _=e,P&&c?N(Tt):(c=h=e,g)}function Jt(){_!==e&&Uc(_),O=0,c=y=h=_=e}function qt(){return _===e?g:ht(zr())}function Vt(){var Tt=zr(),un=$(Tt);if(c=arguments,h=this,y=Tt,un){if(_===e)return X(y);if(I)return Uc(_),_=We(at,r),N(y)}return _===e&&(_=We(at,r)),g}return Vt.cancel=Jt,Vt.flush=qt,Vt}var z0=st(function(n,r){return gc(n,1,r)}),P0=st(function(n,r,i){return gc(n,cn(r)||0,i)});function D0(n){return An(n,et)}function Pr(n,r){if(typeof n!="function"||r!=null&&typeof r!="function")throw new tn(o);var i=function(){var c=arguments,h=r?r.apply(this,c):c[0],u=i.cache;if(u.has(h))return u.get(h);var g=n.apply(this,c);return i.cache=u.set(h,g)||u,g};return i.cache=new(Pr.Cache||yn),i}Pr.Cache=yn;function Dr(n){if(typeof n!="function")throw new tn(o);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}function U0(n){return wa(2,n)}var q0=Ao(function(n,r){r=r.length==1&&j(r[0])?wt(r[0],Zt(K())):wt(Ct(r,1),Zt(K()));var i=r.length;return st(function(c){for(var h=-1,u=zt(c.length,i);++h<u;)c[h]=r[h].call(this,c[h]);return Kt(n,this,c)})}),Ji=st(function(n,r){var i=Pn(r,de(Ji));return An(n,z,e,r,i)}),ba=st(function(n,r){var i=Pn(r,de(ba));return An(n,F,e,r,i)}),F0=En(function(n,r){return An(n,it,e,e,e,r)});function B0(n,r){if(typeof n!="function")throw new tn(o);return r=r===e?r:nt(r),st(n,r)}function W0(n,r){if(typeof n!="function")throw new tn(o);return r=r==null?0:Ot(nt(r),0),st(function(i){var c=i[r],h=Bn(i,0,r);return c&&zn(h,c),Kt(n,this,h)})}function N0(n,r,i){var c=!0,h=!0;if(typeof n!="function")throw new tn(o);return At(i)&&(c="leading"in i?!!i.leading:c,h="trailing"in i?!!i.trailing:h),Ta(n,r,{leading:c,maxWait:r,trailing:h})}function H0(n){return ya(n,1)}function Y0(n,r){return Ji(zi(r),n)}function G0(){if(!arguments.length)return[];var n=arguments[0];return j(n)?n:[n]}function K0(n){return en(n,A)}function Z0(n,r){return r=typeof r=="function"?r:e,en(n,A,r)}function X0(n){return en(n,M|A)}function $0(n,r){return r=typeof r=="function"?r:e,en(n,M|A,r)}function J0(n,r){return r==null||pc(n,r,Rt(r))}function ln(n,r){return n===r||n!==n&&r!==r}var V0=br(yi),k0=br(function(n,r){return n>=r}),Vn=Mc((function(){return arguments})())?Mc:function(n){return Et(n)&&xt.call(n,"callee")&&!cc.call(n,"callee")},j=E.isArray,Q0=Ns?Zt(Ns):so;function Wt(n){return n!=null&&Ur(n.length)&&!Tn(n)}function St(n){return Et(n)&&Wt(n)}function j0(n){return n===!0||n===!1||Et(n)&&Dt(n)==Me}var Wn=u1||cs,tu=Hs?Zt(Hs):co;function nu(n){return Et(n)&&n.nodeType===1&&!Ne(n)}function eu(n){if(n==null)return!0;if(Wt(n)&&(j(n)||typeof n=="string"||typeof n.splice=="function"||Wn(n)||pe(n)||Vn(n)))return!n.length;var r=Pt(n);if(r==an||r==fn)return!n.size;if(Be(n))return!Ei(n).length;for(var i in n)if(xt.call(n,i))return!1;return!0}function ru(n,r){return Ue(n,r)}function iu(n,r,i){i=typeof i=="function"?i:e;var c=i?i(n,r):e;return c===e?Ue(n,r,e,i):!!c}function Vi(n){if(!Et(n))return!1;var r=Dt(n);return r==$e||r==Tf||typeof n.message=="string"&&typeof n.name=="string"&&!Ne(n)}function su(n){return typeof n=="number"&&fc(n)}function Tn(n){if(!At(n))return!1;var r=Dt(n);return r==Je||r==gs||r==Sf||r==Lf}function La(n){return typeof n=="number"&&n==nt(n)}function Ur(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Ft}function At(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}function Et(n){return n!=null&&typeof n=="object"}var Oa=Ys?Zt(Ys):fo;function cu(n,r){return n===r||Ai(n,r,Wi(r))}function au(n,r,i){return i=typeof i=="function"?i:e,Ai(n,r,Wi(r),i)}function fu(n){return Ra(n)&&n!=+n}function hu(n){if(Zo(n))throw new Q(f);return yc(n)}function ou(n){return n===null}function lu(n){return n==null}function Ra(n){return typeof n=="number"||Et(n)&&Dt(n)==we}function Ne(n){if(!Et(n)||Dt(n)!=vn)return!1;var r=hr(n);if(r===null)return!0;var i=xt.call(r,"constructor")&&r.constructor;return typeof i=="function"&&i instanceof i&&sr.call(i)==c1}var ki=Gs?Zt(Gs):ho;function uu(n){return La(n)&&n>=-Ft&&n<=Ft}var Ia=Ks?Zt(Ks):oo;function qr(n){return typeof n=="string"||!j(n)&&Et(n)&&Dt(n)==Ee}function $t(n){return typeof n=="symbol"||Et(n)&&Dt(n)==Ve}var pe=Zs?Zt(Zs):lo;function du(n){return n===e}function pu(n){return Et(n)&&Pt(n)==Se}function gu(n){return Et(n)&&Dt(n)==Rf}var mu=br(Si),xu=br(function(n,r){return n<=r});function Ca(n){if(!n)return[];if(Wt(n))return qr(n)?hn(n):Bt(n);if(Le&&n[Le])return $h(n[Le]());var r=Pt(n),i=r==an?ui:r==fn?er:ge;return i(n)}function bn(n){if(!n)return n===0?n:0;if(n=cn(n),n===Gt||n===-Gt){var r=n<0?-1:1;return r*Ze}return n===n?n:0}function nt(n){var r=bn(n),i=r%1;return r===r?i?r-i:r:0}function za(n){return n?Zn(nt(n),0,gn):0}function cn(n){if(typeof n=="number")return n;if($t(n))return Nn;if(At(n)){var r=typeof n.valueOf=="function"?n.valueOf():n;n=At(r)?r+"":r}if(typeof n!="string")return n===0?n:+n;n=Qs(n);var i=kf.test(n);return i||jf.test(n)?Ih(n.slice(2),i?2:8):Vf.test(n)?Nn:+n}function Pa(n){return xn(n,Nt(n))}function _u(n){return n?Zn(nt(n),-Ft,Ft):n===0?n:0}function gt(n){return n==null?"":Xt(n)}var vu=le(function(n,r){if(Be(r)||Wt(r)){xn(r,Rt(r),n);return}for(var i in r)xt.call(r,i)&&ze(n,i,r[i])}),Da=le(function(n,r){xn(r,Nt(r),n)}),Fr=le(function(n,r,i,c){xn(r,Nt(r),n,c)}),Mu=le(function(n,r,i,c){xn(r,Rt(r),n,c)}),yu=En(_i);function wu(n,r){var i=oe(n);return r==null?i:dc(i,r)}var Au=st(function(n,r){n=vt(n);var i=-1,c=r.length,h=c>2?r[2]:e;for(h&&Ut(r[0],r[1],h)&&(c=1);++i<c;)for(var u=r[i],g=Nt(u),_=-1,y=g.length;++_<y;){var O=g[_],R=n[O];(R===e||ln(R,ae[O])&&!xt.call(n,O))&&(n[O]=u[O])}return n}),Eu=st(function(n){return n.push(e,Qc),Kt(Ua,e,n)});function Su(n,r){return $s(n,K(r,3),mn)}function Tu(n,r){return $s(n,K(r,3),Mi)}function bu(n,r){return n==null?n:vi(n,K(r,3),Nt)}function Lu(n,r){return n==null?n:_c(n,K(r,3),Nt)}function Ou(n,r){return n&&mn(n,K(r,3))}function Ru(n,r){return n&&Mi(n,K(r,3))}function Iu(n){return n==null?[]:vr(n,Rt(n))}function Cu(n){return n==null?[]:vr(n,Nt(n))}function Qi(n,r,i){var c=n==null?e:Xn(n,r);return c===e?i:c}function zu(n,r){return n!=null&&na(n,r,no)}function ji(n,r){return n!=null&&na(n,r,eo)}var Pu=Xc(function(n,r,i){r!=null&&typeof r.toString!="function"&&(r=cr.call(r)),n[r]=i},ns(Ht)),Du=Xc(function(n,r,i){r!=null&&typeof r.toString!="function"&&(r=cr.call(r)),xt.call(n,r)?n[r].push(i):n[r]=[i]},K),Uu=st(De);function Rt(n){return Wt(n)?lc(n):Ei(n)}function Nt(n){return Wt(n)?lc(n,!0):uo(n)}function qu(n,r){var i={};return r=K(r,3),mn(n,function(c,h,u){wn(i,r(c,h,u),c)}),i}function Fu(n,r){var i={};return r=K(r,3),mn(n,function(c,h,u){wn(i,h,r(c,h,u))}),i}var Bu=le(function(n,r,i){Mr(n,r,i)}),Ua=le(function(n,r,i,c){Mr(n,r,i,c)}),Wu=En(function(n,r){var i={};if(n==null)return i;var c=!1;r=wt(r,function(u){return u=Fn(u,n),c||(c=u.length>1),u}),xn(n,Fi(n),i),c&&(i=en(i,M|S|A,Po));for(var h=r.length;h--;)Ri(i,r[h]);return i});function Nu(n,r){return qa(n,Dr(K(r)))}var Hu=En(function(n,r){return n==null?{}:go(n,r)});function qa(n,r){if(n==null)return{};var i=wt(Fi(n),function(c){return[c]});return r=K(r),Lc(n,i,function(c,h){return r(c,h[0])})}function Yu(n,r,i){r=Fn(r,n);var c=-1,h=r.length;for(h||(h=1,n=e);++c<h;){var u=n==null?e:n[_n(r[c])];u===e&&(c=h,u=i),n=Tn(u)?u.call(n):u}return n}function Gu(n,r,i){return n==null?n:qe(n,r,i)}function Ku(n,r,i,c){return c=typeof c=="function"?c:e,n==null?n:qe(n,r,i,c)}var Fa=Vc(Rt),Ba=Vc(Nt);function Zu(n,r,i){var c=j(n),h=c||Wn(n)||pe(n);if(r=K(r,4),i==null){var u=n&&n.constructor;h?i=c?new u:[]:At(n)?i=Tn(u)?oe(hr(n)):{}:i={}}return(h?jt:mn)(n,function(g,_,y){return r(i,g,_,y)}),i}function Xu(n,r){return n==null?!0:Ri(n,r)}function $u(n,r,i){return n==null?n:zc(n,r,zi(i))}function Ju(n,r,i,c){return c=typeof c=="function"?c:e,n==null?n:zc(n,r,zi(i),c)}function ge(n){return n==null?[]:li(n,Rt(n))}function Vu(n){return n==null?[]:li(n,Nt(n))}function ku(n,r,i){return i===e&&(i=r,r=e),i!==e&&(i=cn(i),i=i===i?i:0),r!==e&&(r=cn(r),r=r===r?r:0),Zn(cn(n),r,i)}function Qu(n,r,i){return r=bn(r),i===e?(i=r,r=0):i=bn(i),n=cn(n),ro(n,r,i)}function ju(n,r,i){if(i&&typeof i!="boolean"&&Ut(n,r,i)&&(r=i=e),i===e&&(typeof r=="boolean"?(i=r,r=e):typeof n=="boolean"&&(i=n,n=e)),n===e&&r===e?(n=0,r=1):(n=bn(n),r===e?(r=n,n=0):r=bn(r)),n>r){var c=n;n=r,r=c}if(i||n%1||r%1){var h=hc();return zt(n+h*(r-n+Rh("1e-"+((h+"").length-1))),r)}return bi(n,r)}var td=ue(function(n,r,i){return r=r.toLowerCase(),n+(i?Wa(r):r)});function Wa(n){return ts(gt(n).toLowerCase())}function Na(n){return n=gt(n),n&&n.replace(nh,Yh).replace(Mh,"")}function nd(n,r,i){n=gt(n),r=Xt(r);var c=n.length;i=i===e?c:Zn(nt(i),0,c);var h=i;return i-=r.length,i>=0&&n.slice(i,h)==r}function ed(n){return n=gt(n),n&&Df.test(n)?n.replace(_s,Gh):n}function rd(n){return n=gt(n),n&&Nf.test(n)?n.replace(Jr,"\\$&"):n}var id=ue(function(n,r,i){return n+(i?"-":"")+r.toLowerCase()}),sd=ue(function(n,r,i){return n+(i?" ":"")+r.toLowerCase()}),cd=Gc("toLowerCase");function ad(n,r,i){n=gt(n),r=nt(r);var c=r?se(n):0;if(!r||c>=r)return n;var h=(r-c)/2;return Tr(dr(h),i)+n+Tr(ur(h),i)}function fd(n,r,i){n=gt(n),r=nt(r);var c=r?se(n):0;return r&&c<r?n+Tr(r-c,i):n}function hd(n,r,i){n=gt(n),r=nt(r);var c=r?se(n):0;return r&&c<r?Tr(r-c,i)+n:n}function od(n,r,i){return i||r==null?r=0:r&&(r=+r),m1(gt(n).replace(Vr,""),r||0)}function ld(n,r,i){return(i?Ut(n,r,i):r===e)?r=1:r=nt(r),Li(gt(n),r)}function ud(){var n=arguments,r=gt(n[0]);return n.length<3?r:r.replace(n[1],n[2])}var dd=ue(function(n,r,i){return n+(i?"_":"")+r.toLowerCase()});function pd(n,r,i){return i&&typeof i!="number"&&Ut(n,r,i)&&(r=i=e),i=i===e?gn:i>>>0,i?(n=gt(n),n&&(typeof r=="string"||r!=null&&!ki(r))&&(r=Xt(r),!r&&ie(n))?Bn(hn(n),0,i):n.split(r,i)):[]}var gd=ue(function(n,r,i){return n+(i?" ":"")+ts(r)});function md(n,r,i){return n=gt(n),i=i==null?0:Zn(nt(i),0,n.length),r=Xt(r),n.slice(i,i+r.length)==r}function xd(n,r,i){var c=l.templateSettings;i&&Ut(n,r,i)&&(r=e),n=gt(n),r=Fr({},r,c,kc);var h=Fr({},r.imports,c.imports,kc),u=Rt(h),g=li(h,u),_,y,O=0,R=r.interpolate||ke,I="__p += '",P=di((r.escape||ke).source+"|"+R.source+"|"+(R===vs?Jf:ke).source+"|"+(r.evaluate||ke).source+"|$","g"),N="//# sourceURL="+(xt.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Sh+"]")+`
`;n.replace(P,function($,at,ht,Jt,qt,Vt){return ht||(ht=Jt),I+=n.slice(O,Vt).replace(eh,Kh),at&&(_=!0,I+=`' +
__e(`+at+`) +
'`),qt&&(y=!0,I+=`';
`+qt+`;
__p += '`),ht&&(I+=`' +
((__t = (`+ht+`)) == null ? '' : __t) +
'`),O=Vt+$.length,$}),I+=`';
`;var X=xt.call(r,"variable")&&r.variable;if(!X)I=`with (obj) {
`+I+`
}
`;else if(Xf.test(X))throw new Q(d);I=(y?I.replace(If,""):I).replace(Cf,"$1").replace(zf,"$1;"),I="function("+(X||"obj")+`) {
`+(X?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_?", __e = _.escape":"")+(y?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+I+`return __p
}`;var rt=Ya(function(){return ut(u,N+"return "+I).apply(e,g)});if(rt.source=I,Vi(rt))throw rt;return rt}function _d(n){return gt(n).toLowerCase()}function vd(n){return gt(n).toUpperCase()}function Md(n,r,i){if(n=gt(n),n&&(i||r===e))return Qs(n);if(!n||!(r=Xt(r)))return n;var c=hn(n),h=hn(r),u=js(c,h),g=tc(c,h)+1;return Bn(c,u,g).join("")}function yd(n,r,i){if(n=gt(n),n&&(i||r===e))return n.slice(0,ec(n)+1);if(!n||!(r=Xt(r)))return n;var c=hn(n),h=tc(c,hn(r))+1;return Bn(c,0,h).join("")}function wd(n,r,i){if(n=gt(n),n&&(i||r===e))return n.replace(Vr,"");if(!n||!(r=Xt(r)))return n;var c=hn(n),h=js(c,hn(r));return Bn(c,h).join("")}function Ad(n,r){var i=ot,c=G;if(At(r)){var h="separator"in r?r.separator:h;i="length"in r?nt(r.length):i,c="omission"in r?Xt(r.omission):c}n=gt(n);var u=n.length;if(ie(n)){var g=hn(n);u=g.length}if(i>=u)return n;var _=i-se(c);if(_<1)return c;var y=g?Bn(g,0,_).join(""):n.slice(0,_);if(h===e)return y+c;if(g&&(_+=y.length-_),ki(h)){if(n.slice(_).search(h)){var O,R=y;for(h.global||(h=di(h.source,gt(Ms.exec(h))+"g")),h.lastIndex=0;O=h.exec(R);)var I=O.index;y=y.slice(0,I===e?_:I)}}else if(n.indexOf(Xt(h),_)!=_){var P=y.lastIndexOf(h);P>-1&&(y=y.slice(0,P))}return y+c}function Ed(n){return n=gt(n),n&&Pf.test(n)?n.replace(xs,Qh):n}var Sd=ue(function(n,r,i){return n+(i?" ":"")+r.toUpperCase()}),ts=Gc("toUpperCase");function Ha(n,r,i){return n=gt(n),r=i?e:r,r===e?Xh(n)?n1(n):Fh(n):n.match(r)||[]}var Ya=st(function(n,r){try{return Kt(n,e,r)}catch(i){return Vi(i)?i:new Q(i)}}),Td=En(function(n,r){return jt(r,function(i){i=_n(i),wn(n,i,$i(n[i],n))}),n});function bd(n){var r=n==null?0:n.length,i=K();return n=r?wt(n,function(c){if(typeof c[1]!="function")throw new tn(o);return[i(c[0]),c[1]]}):[],st(function(c){for(var h=-1;++h<r;){var u=n[h];if(Kt(u[0],this,c))return Kt(u[1],this,c)}})}function Ld(n){return Q1(en(n,M))}function ns(n){return function(){return n}}function Od(n,r){return n==null||n!==n?r:n}var Rd=Zc(),Id=Zc(!0);function Ht(n){return n}function es(n){return wc(typeof n=="function"?n:en(n,M))}function Cd(n){return Ec(en(n,M))}function zd(n,r){return Sc(n,en(r,M))}var Pd=st(function(n,r){return function(i){return De(i,n,r)}}),Dd=st(function(n,r){return function(i){return De(n,i,r)}});function rs(n,r,i){var c=Rt(r),h=vr(r,c);i==null&&!(At(r)&&(h.length||!c.length))&&(i=r,r=n,n=this,h=vr(r,Rt(r)));var u=!(At(i)&&"chain"in i)||!!i.chain,g=Tn(n);return jt(h,function(_){var y=r[_];n[_]=y,g&&(n.prototype[_]=function(){var O=this.__chain__;if(u||O){var R=n(this.__wrapped__),I=R.__actions__=Bt(this.__actions__);return I.push({func:y,args:arguments,thisArg:n}),R.__chain__=O,R}return y.apply(n,zn([this.value()],arguments))})}),n}function Ud(){return It._===this&&(It._=a1),this}function is(){}function qd(n){return n=nt(n),st(function(r){return Tc(r,n)})}var Fd=Di(wt),Bd=Di(Xs),Wd=Di(ci);function Ga(n){return Hi(n)?ai(_n(n)):mo(n)}function Nd(n){return function(r){return n==null?e:Xn(n,r)}}var Hd=$c(),Yd=$c(!0);function ss(){return[]}function cs(){return!1}function Gd(){return{}}function Kd(){return""}function Zd(){return!0}function Xd(n,r){if(n=nt(n),n<1||n>Ft)return[];var i=gn,c=zt(n,gn);r=K(r),n-=gn;for(var h=oi(c,r);++i<n;)r(i);return h}function $d(n){return j(n)?wt(n,_n):$t(n)?[n]:Bt(oa(gt(n)))}function Jd(n){var r=++s1;return gt(n)+r}var Vd=Sr(function(n,r){return n+r},0),kd=Ui("ceil"),Qd=Sr(function(n,r){return n/r},1),jd=Ui("floor");function tp(n){return n&&n.length?_r(n,Ht,yi):e}function np(n,r){return n&&n.length?_r(n,K(r,2),yi):e}function ep(n){return Vs(n,Ht)}function rp(n,r){return Vs(n,K(r,2))}function ip(n){return n&&n.length?_r(n,Ht,Si):e}function sp(n,r){return n&&n.length?_r(n,K(r,2),Si):e}var cp=Sr(function(n,r){return n*r},1),ap=Ui("round"),fp=Sr(function(n,r){return n-r},0);function hp(n){return n&&n.length?hi(n,Ht):0}function op(n,r){return n&&n.length?hi(n,K(r,2)):0}return l.after=C0,l.ary=ya,l.assign=vu,l.assignIn=Da,l.assignInWith=Fr,l.assignWith=Mu,l.at=yu,l.before=wa,l.bind=$i,l.bindAll=Td,l.bindKey=Aa,l.castArray=G0,l.chain=_a,l.chunk=jo,l.compact=tl,l.concat=nl,l.cond=bd,l.conforms=Ld,l.constant=ns,l.countBy=h0,l.create=wu,l.curry=Ea,l.curryRight=Sa,l.debounce=Ta,l.defaults=Au,l.defaultsDeep=Eu,l.defer=z0,l.delay=P0,l.difference=el,l.differenceBy=rl,l.differenceWith=il,l.drop=sl,l.dropRight=cl,l.dropRightWhile=al,l.dropWhile=fl,l.fill=hl,l.filter=l0,l.flatMap=p0,l.flatMapDeep=g0,l.flatMapDepth=m0,l.flatten=pa,l.flattenDeep=ol,l.flattenDepth=ll,l.flip=D0,l.flow=Rd,l.flowRight=Id,l.fromPairs=ul,l.functions=Iu,l.functionsIn=Cu,l.groupBy=x0,l.initial=pl,l.intersection=gl,l.intersectionBy=ml,l.intersectionWith=xl,l.invert=Pu,l.invertBy=Du,l.invokeMap=v0,l.iteratee=es,l.keyBy=M0,l.keys=Rt,l.keysIn=Nt,l.map=Cr,l.mapKeys=qu,l.mapValues=Fu,l.matches=Cd,l.matchesProperty=zd,l.memoize=Pr,l.merge=Bu,l.mergeWith=Ua,l.method=Pd,l.methodOf=Dd,l.mixin=rs,l.negate=Dr,l.nthArg=qd,l.omit=Wu,l.omitBy=Nu,l.once=U0,l.orderBy=y0,l.over=Fd,l.overArgs=q0,l.overEvery=Bd,l.overSome=Wd,l.partial=Ji,l.partialRight=ba,l.partition=w0,l.pick=Hu,l.pickBy=qa,l.property=Ga,l.propertyOf=Nd,l.pull=yl,l.pullAll=ma,l.pullAllBy=wl,l.pullAllWith=Al,l.pullAt=El,l.range=Hd,l.rangeRight=Yd,l.rearg=F0,l.reject=S0,l.remove=Sl,l.rest=B0,l.reverse=Zi,l.sampleSize=b0,l.set=Gu,l.setWith=Ku,l.shuffle=L0,l.slice=Tl,l.sortBy=I0,l.sortedUniq=zl,l.sortedUniqBy=Pl,l.split=pd,l.spread=W0,l.tail=Dl,l.take=Ul,l.takeRight=ql,l.takeRightWhile=Fl,l.takeWhile=Bl,l.tap=t0,l.throttle=N0,l.thru=Ir,l.toArray=Ca,l.toPairs=Fa,l.toPairsIn=Ba,l.toPath=$d,l.toPlainObject=Pa,l.transform=Zu,l.unary=H0,l.union=Wl,l.unionBy=Nl,l.unionWith=Hl,l.uniq=Yl,l.uniqBy=Gl,l.uniqWith=Kl,l.unset=Xu,l.unzip=Xi,l.unzipWith=xa,l.update=$u,l.updateWith=Ju,l.values=ge,l.valuesIn=Vu,l.without=Zl,l.words=Ha,l.wrap=Y0,l.xor=Xl,l.xorBy=$l,l.xorWith=Jl,l.zip=Vl,l.zipObject=kl,l.zipObjectDeep=Ql,l.zipWith=jl,l.entries=Fa,l.entriesIn=Ba,l.extend=Da,l.extendWith=Fr,rs(l,l),l.add=Vd,l.attempt=Ya,l.camelCase=td,l.capitalize=Wa,l.ceil=kd,l.clamp=ku,l.clone=K0,l.cloneDeep=X0,l.cloneDeepWith=$0,l.cloneWith=Z0,l.conformsTo=J0,l.deburr=Na,l.defaultTo=Od,l.divide=Qd,l.endsWith=nd,l.eq=ln,l.escape=ed,l.escapeRegExp=rd,l.every=o0,l.find=u0,l.findIndex=ua,l.findKey=Su,l.findLast=d0,l.findLastIndex=da,l.findLastKey=Tu,l.floor=jd,l.forEach=va,l.forEachRight=Ma,l.forIn=bu,l.forInRight=Lu,l.forOwn=Ou,l.forOwnRight=Ru,l.get=Qi,l.gt=V0,l.gte=k0,l.has=zu,l.hasIn=ji,l.head=ga,l.identity=Ht,l.includes=_0,l.indexOf=dl,l.inRange=Qu,l.invoke=Uu,l.isArguments=Vn,l.isArray=j,l.isArrayBuffer=Q0,l.isArrayLike=Wt,l.isArrayLikeObject=St,l.isBoolean=j0,l.isBuffer=Wn,l.isDate=tu,l.isElement=nu,l.isEmpty=eu,l.isEqual=ru,l.isEqualWith=iu,l.isError=Vi,l.isFinite=su,l.isFunction=Tn,l.isInteger=La,l.isLength=Ur,l.isMap=Oa,l.isMatch=cu,l.isMatchWith=au,l.isNaN=fu,l.isNative=hu,l.isNil=lu,l.isNull=ou,l.isNumber=Ra,l.isObject=At,l.isObjectLike=Et,l.isPlainObject=Ne,l.isRegExp=ki,l.isSafeInteger=uu,l.isSet=Ia,l.isString=qr,l.isSymbol=$t,l.isTypedArray=pe,l.isUndefined=du,l.isWeakMap=pu,l.isWeakSet=gu,l.join=_l,l.kebabCase=id,l.last=sn,l.lastIndexOf=vl,l.lowerCase=sd,l.lowerFirst=cd,l.lt=mu,l.lte=xu,l.max=tp,l.maxBy=np,l.mean=ep,l.meanBy=rp,l.min=ip,l.minBy=sp,l.stubArray=ss,l.stubFalse=cs,l.stubObject=Gd,l.stubString=Kd,l.stubTrue=Zd,l.multiply=cp,l.nth=Ml,l.noConflict=Ud,l.noop=is,l.now=zr,l.pad=ad,l.padEnd=fd,l.padStart=hd,l.parseInt=od,l.random=ju,l.reduce=A0,l.reduceRight=E0,l.repeat=ld,l.replace=ud,l.result=Yu,l.round=ap,l.runInContext=v,l.sample=T0,l.size=O0,l.snakeCase=dd,l.some=R0,l.sortedIndex=bl,l.sortedIndexBy=Ll,l.sortedIndexOf=Ol,l.sortedLastIndex=Rl,l.sortedLastIndexBy=Il,l.sortedLastIndexOf=Cl,l.startCase=gd,l.startsWith=md,l.subtract=fp,l.sum=hp,l.sumBy=op,l.template=xd,l.times=Xd,l.toFinite=bn,l.toInteger=nt,l.toLength=za,l.toLower=_d,l.toNumber=cn,l.toSafeInteger=_u,l.toString=gt,l.toUpper=vd,l.trim=Md,l.trimEnd=yd,l.trimStart=wd,l.truncate=Ad,l.unescape=Ed,l.uniqueId=Jd,l.upperCase=Sd,l.upperFirst=ts,l.each=va,l.eachRight=Ma,l.first=ga,rs(l,(function(){var n={};return mn(l,function(r,i){xt.call(l.prototype,i)||(n[i]=r)}),n})(),{chain:!1}),l.VERSION=s,jt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){l[n].placeholder=l}),jt(["drop","take"],function(n,r){ft.prototype[n]=function(i){i=i===e?1:Ot(nt(i),0);var c=this.__filtered__&&!r?new ft(this):this.clone();return c.__filtered__?c.__takeCount__=zt(i,c.__takeCount__):c.__views__.push({size:zt(i,gn),type:n+(c.__dir__<0?"Right":"")}),c},ft.prototype[n+"Right"]=function(i){return this.reverse()[n](i).reverse()}}),jt(["filter","map","takeWhile"],function(n,r){var i=r+1,c=i==pt||i==kt;ft.prototype[n]=function(h){var u=this.clone();return u.__iteratees__.push({iteratee:K(h,3),type:i}),u.__filtered__=u.__filtered__||c,u}}),jt(["head","last"],function(n,r){var i="take"+(r?"Right":"");ft.prototype[n]=function(){return this[i](1).value()[0]}}),jt(["initial","tail"],function(n,r){var i="drop"+(r?"":"Right");ft.prototype[n]=function(){return this.__filtered__?new ft(this):this[i](1)}}),ft.prototype.compact=function(){return this.filter(Ht)},ft.prototype.find=function(n){return this.filter(n).head()},ft.prototype.findLast=function(n){return this.reverse().find(n)},ft.prototype.invokeMap=st(function(n,r){return typeof n=="function"?new ft(this):this.map(function(i){return De(i,n,r)})}),ft.prototype.reject=function(n){return this.filter(Dr(K(n)))},ft.prototype.slice=function(n,r){n=nt(n);var i=this;return i.__filtered__&&(n>0||r<0)?new ft(i):(n<0?i=i.takeRight(-n):n&&(i=i.drop(n)),r!==e&&(r=nt(r),i=r<0?i.dropRight(-r):i.take(r-n)),i)},ft.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},ft.prototype.toArray=function(){return this.take(gn)},mn(ft.prototype,function(n,r){var i=/^(?:filter|find|map|reject)|While$/.test(r),c=/^(?:head|last)$/.test(r),h=l[c?"take"+(r=="last"?"Right":""):r],u=c||/^find/.test(r);h&&(l.prototype[r]=function(){var g=this.__wrapped__,_=c?[1]:arguments,y=g instanceof ft,O=_[0],R=y||j(g),I=function(at){var ht=h.apply(l,zn([at],_));return c&&P?ht[0]:ht};R&&i&&typeof O=="function"&&O.length!=1&&(y=R=!1);var P=this.__chain__,N=!!this.__actions__.length,X=u&&!P,rt=y&&!N;if(!u&&R){g=rt?g:new ft(this);var $=n.apply(g,_);return $.__actions__.push({func:Ir,args:[I],thisArg:e}),new nn($,P)}return X&&rt?n.apply(this,_):($=this.thru(I),X?c?$.value()[0]:$.value():$)})}),jt(["pop","push","shift","sort","splice","unshift"],function(n){var r=rr[n],i=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",c=/^(?:pop|shift)$/.test(n);l.prototype[n]=function(){var h=arguments;if(c&&!this.__chain__){var u=this.value();return r.apply(j(u)?u:[],h)}return this[i](function(g){return r.apply(j(g)?g:[],h)})}}),mn(ft.prototype,function(n,r){var i=l[r];if(i){var c=i.name+"";xt.call(he,c)||(he[c]=[]),he[c].push({name:r,func:i})}}),he[Er(e,C).name]=[{name:"wrapper",func:e}],ft.prototype.clone=A1,ft.prototype.reverse=E1,ft.prototype.value=S1,l.prototype.at=n0,l.prototype.chain=e0,l.prototype.commit=r0,l.prototype.next=i0,l.prototype.plant=c0,l.prototype.reverse=a0,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=f0,l.prototype.first=l.prototype.head,Le&&(l.prototype[Le]=s0),l}),ce=e1();Hn?((Hn.exports=ce)._=ce,ei._=ce):It._=ce}).call(Za)})(me,me.exports)),me.exports}var $a=Xa();function Ja(Y){const t=document.createElement("canvas");return t.style.display="block",t.style.width=Y.style.width,t.style.height=Y.style.height,Y.style.position="relative",t.setAttribute("id",$a.uniqueId("canvas")),Y.append(t),t}class fs{static gl}class Va{canvas;gl;constructor(t){const e=window.devicePixelRatio||1,s=Ja(t),a=s.getBoundingClientRect();s.width=a.width*e,s.height=a.height*e,this.canvas=s,this.gl=s.getContext("webgl2",{stencil:!1}),fs.gl=this.gl;const f=new Set;f.add("OES_element_index_uint"),f.add("OES_vertex_array_object"),f.add("WEBGL_depth_texture"),f.forEach(o=>{this.gl.getExtension(o)})}init(){}}class ka extends Set{}class He{create(t){}destroy(t){}tie(t){}untie(){}}class hs extends He{source;shader;type;constructor(t,e){super(),this.type=e,this.source=t}tie(t){this.create(t),this.shaderSource(t,this.source),this.compile(t),t.getShaderParameter(this.shader,t.COMPILE_STATUS)||console.error("Shader compilation error:",t.getShaderInfoLog(this.shader))}create(t){this.shader=t.createShader({0:t.VERTEX_SHADER,1:t.FRAGMENT_SHADER}[this.type])}shaderSource(t,e){t.shaderSource(this.shader,e)}compile(t){t.compileShader(this.shader)}}class Qa extends hs{constructor(t){super(t,1)}}class ja extends hs{constructor(t){super(t,0)}}class xe extends He{static current;VertexShader;FragmentShader;id;gl;m_attributeLocations={};m_uniformLocations={};constructor(t,e){super(),this.gl=t;for(let s of e)s.tie(t),s instanceof ja&&(this.VertexShader=s),s instanceof Qa&&(this.FragmentShader=s)}create(t){this.id=t.createProgram()}initAttribute(t){const e=t.getProgramParameter(this.id,t.ACTIVE_ATTRIBUTES);for(let s=0;s<e;s++){const f=t.getActiveAttrib(this.id,s).name,o=t.getAttribLocation(this.id,f);this.m_attributeLocations[f]={location:o}}}initUniform(t){const e=t.getProgramParameter(this.id,t.ACTIVE_UNIFORMS);for(let s=0;s<e;s++){const a=t.getActiveUniform(this.id,s),f=a.name,o=t.getUniformLocation(this.id,f);this.m_uniformLocations[f]={location:o,type:a.type}}}tie(t){this.create(t),this.attach(),this.link(),this.use(),t.getProgramParameter(this.id,t.LINK_STATUS)||console.error("Program link error:",this.gl.getProgramInfoLog(this.id)),this.initAttribute(t),this.initUniform(t)}attach(){this.gl.attachShader(this.id,this.VertexShader.shader),this.gl.attachShader(this.id,this.FragmentShader.shader)}link(){this.gl.linkProgram(this.id)}use(){this.gl.useProgram(this.id),xe.current=this}}let tf=class extends He{constructor(){super()}};class Br extends tf{constructor(){super()}static default(){return new Br}}class nf extends Array{constructor(){super()}build(t){this.createQueue(t)}createQueue(t){const e=[];e.push(Br.default()),this.forEach(s=>{s.material.renderMode&&s.geometry.updateDrawMode(s.material.renderMode.mode),e.push(new xe(t,s.material.shader)),this.camera.defaultUniform.forEach(a=>{e.push(a)}),s.material.state.forEach(a=>{e.push(a)}),s.material.uniform.forEach(a=>{e.push(a)}),s.geometry.vbos.forEach(a=>{e.push(a)}),s.geometry.drawers.forEach(a=>{e.push(a)})}),this.queue=e}destroyQueue(t){}queue=[];render(t){this.destroyQueue(t),this.createQueue(t),t.clearColor(0,0,0,.5),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.queue.forEach(s=>{s.tie(t)});const e=t.getError();e!==t.NO_ERROR&&console.error("WebGL Error:",e)}}class ef{constructor(){}}class rf{context;setContext(t){this.context=t}}class sf extends rf{constructor(){super()}end(){}start(){this.context.chain.setNext(this.context.cameraChain)}}class os{nextHandler;setNext(t){return this.nextHandler=t,t}mousedown(t){return this.nextHandler?this.nextHandler.mousedown(t):null}mouseup(t){return this.nextHandler?this.nextHandler.mouseup(t):null}mousemove(t){return this.nextHandler?this.nextHandler.mousemove(t):null}}class cf extends os{}const tt=1e-6,ls=new Float32Array([1,0,0,0,1,0,0,0,1]);class bt extends Float32Array{static BYTE_LENGTH=9*Float32Array.BYTES_PER_ELEMENT;constructor(...t){switch(t.length){case 9:super(t);break;case 2:super(t[0],t[1],9);break;case 1:const e=t[0];typeof e=="number"?super([e,e,e,e,e,e,e,e,e]):super(e,0,9);break;default:super(ls);break}}get str(){return bt.str(this)}copy(t){return this.set(t),this}identity(){return this.set(ls),this}multiply(t){return bt.multiply(this,this,t)}mul(t){return this}transpose(){return bt.transpose(this,this)}invert(){return bt.invert(this,this)}translate(t){return bt.translate(this,this,t)}rotate(t){return bt.rotate(this,this,t)}scale(t){return bt.scale(this,this,t)}static create(){return new bt}static clone(t){return new bt(t)}static copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}static fromValues(...t){return new bt(...t)}static set(t,...e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}static identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}static transpose(t,e){if(t===e){const s=e[1],a=e[2],f=e[5];t[1]=e[3],t[2]=e[6],t[3]=s,t[5]=e[7],t[6]=a,t[7]=f}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}static invert(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=e[4],p=e[5],m=e[6],x=e[7],M=e[8],S=M*d-p*x,A=-M*o+p*m,w=x*o-d*m;let b=s*S+a*A+f*w;return b?(b=1/b,t[0]=S*b,t[1]=(-M*a+f*x)*b,t[2]=(p*a-f*d)*b,t[3]=A*b,t[4]=(M*s-f*m)*b,t[5]=(-p*s+f*o)*b,t[6]=w*b,t[7]=(-x*s+a*m)*b,t[8]=(d*s-a*o)*b,t):null}static adjoint(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=e[4],p=e[5],m=e[6],x=e[7],M=e[8];return t[0]=d*M-p*x,t[1]=f*x-a*M,t[2]=a*p-f*d,t[3]=p*m-o*M,t[4]=s*M-f*m,t[5]=f*o-s*p,t[6]=o*x-d*m,t[7]=a*m-s*x,t[8]=s*d-a*o,t}static determinant(t){const e=t[0],s=t[1],a=t[2],f=t[3],o=t[4],d=t[5],p=t[6],m=t[7],x=t[8];return e*(x*o-d*m)+s*(-x*f+d*p)+a*(m*f-o*p)}static add(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t}static subtract(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t}static sub(t,e,s){return t}static multiply(t,e,s){const a=e[0],f=e[1],o=e[2],d=e[3],p=e[4],m=e[5],x=e[6],M=e[7],S=e[8];let A=s[0],w=s[1],b=s[2];return t[0]=A*a+w*d+b*x,t[1]=A*f+w*p+b*M,t[2]=A*o+w*m+b*S,A=s[3],w=s[4],b=s[5],t[3]=A*a+w*d+b*x,t[4]=A*f+w*p+b*M,t[5]=A*o+w*m+b*S,A=s[6],w=s[7],b=s[8],t[6]=A*a+w*d+b*x,t[7]=A*f+w*p+b*M,t[8]=A*o+w*m+b*S,t}static mul(t,e,s){return t}static translate(t,e,s){const a=e[0],f=e[1],o=e[2],d=e[3],p=e[4],m=e[5],x=e[6],M=e[7],S=e[8],A=s[0],w=s[1];return t[0]=a,t[1]=f,t[2]=o,t[3]=d,t[4]=p,t[5]=m,t[6]=A*a+w*d+x,t[7]=A*f+w*p+M,t[8]=A*o+w*m+S,t}static rotate(t,e,s){const a=e[0],f=e[1],o=e[2],d=e[3],p=e[4],m=e[5],x=e[6],M=e[7],S=e[8],A=Math.sin(s),w=Math.cos(s);return t[0]=w*a+A*d,t[1]=w*f+A*p,t[2]=w*o+A*m,t[3]=w*d-A*a,t[4]=w*p-A*f,t[5]=w*m-A*o,t[6]=x,t[7]=M,t[8]=S,t}static scale(t,e,s){const a=s[0],f=s[1];return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=f*e[3],t[4]=f*e[4],t[5]=f*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}static fromTranslation(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}static fromRotation(t,e){const s=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=s,t[2]=0,t[3]=-s,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}static fromScaling(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}static fromMat2d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}static fromQuat(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=s+s,p=a+a,m=f+f,x=s*d,M=a*d,S=a*p,A=f*d,w=f*p,b=f*m,T=o*d,C=o*p,U=o*m;return t[0]=1-S-b,t[3]=M-U,t[6]=A+C,t[1]=M+U,t[4]=1-x-b,t[7]=w-T,t[2]=A-C,t[5]=w+T,t[8]=1-x-S,t}static fromMat4(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}static normalFromMat4(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=e[4],p=e[5],m=e[6],x=e[7],M=e[8],S=e[9],A=e[10],w=e[11],b=e[12],T=e[13],C=e[14],U=e[15],W=s*p-a*d,q=s*m-f*d,z=s*x-o*d,F=a*m-f*p,D=a*x-o*p,it=f*x-o*m,et=M*T-S*b,ot=M*C-A*b,G=M*U-w*b,_t=S*C-A*T,mt=S*U-w*T,pt=A*U-w*C;let V=W*pt-q*mt+z*_t+F*G-D*ot+it*et;return V?(V=1/V,t[0]=(p*pt-m*mt+x*_t)*V,t[1]=(m*G-d*pt-x*ot)*V,t[2]=(d*mt-p*G+x*et)*V,t[3]=(f*mt-a*pt-o*_t)*V,t[4]=(s*pt-f*G+o*ot)*V,t[5]=(a*G-s*mt-o*et)*V,t[6]=(T*it-C*D+U*F)*V,t[7]=(C*z-b*it-U*q)*V,t[8]=(b*D-T*z+U*W)*V,t):null}static projection(t,e,s){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/s,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}static frob(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8])}static multiplyScalar(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t}static multiplyScalarAndAdd(t,e,s,a){return t[0]=e[0]+s[0]*a,t[1]=e[1]+s[1]*a,t[2]=e[2]+s[2]*a,t[3]=e[3]+s[3]*a,t[4]=e[4]+s[4]*a,t[5]=e[5]+s[5]*a,t[6]=e[6]+s[6]*a,t[7]=e[7]+s[7]*a,t[8]=e[8]+s[8]*a,t}static exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}static equals(t,e){const s=t[0],a=t[1],f=t[2],o=t[3],d=t[4],p=t[5],m=t[6],x=t[7],M=t[8],S=e[0],A=e[1],w=e[2],b=e[3],T=e[4],C=e[5],U=e[6],W=e[7],q=e[8];return Math.abs(s-S)<=tt*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(a-A)<=tt*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(f-w)<=tt*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(o-b)<=tt*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(d-T)<=tt*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-C)<=tt*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(m-U)<=tt*Math.max(1,Math.abs(m),Math.abs(U))&&Math.abs(x-W)<=tt*Math.max(1,Math.abs(x),Math.abs(W))&&Math.abs(M-q)<=tt*Math.max(1,Math.abs(M),Math.abs(q))}static str(t){return`Mat3(${t.join(", ")})`}}bt.prototype.mul=bt.prototype.multiply,bt.mul=bt.multiply,bt.sub=bt.subtract;const Ye=bt;class Z extends Float32Array{static BYTE_LENGTH=3*Float32Array.BYTES_PER_ELEMENT;constructor(...t){switch(t.length){case 3:super(t);break;case 2:super(t[0],t[1],3);break;case 1:{const e=t[0];typeof e=="number"?super([e,e,e]):super(e,0,3);break}default:super(3);break}}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}get r(){return this[0]}set r(t){this[0]=t}get g(){return this[1]}set g(t){this[1]=t}get b(){return this[2]}set b(t){this[2]=t}get magnitude(){const t=this[0],e=this[1],s=this[2];return Math.sqrt(t*t+e*e+s*s)}get mag(){return this.magnitude}get squaredMagnitude(){const t=this[0],e=this[1],s=this[2];return t*t+e*e+s*s}get sqrMag(){return this.squaredMagnitude}get str(){return Z.str(this)}copy(t){return this.set(t),this}add(t){return this[0]+=t[0],this[1]+=t[1],this[2]+=t[2],this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this}sub(t){return this}multiply(t){return this[0]*=t[0],this[1]*=t[1],this[2]*=t[2],this}mul(t){return this}divide(t){return this[0]/=t[0],this[1]/=t[1],this[2]/=t[2],this}div(t){return this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this}scaleAndAdd(t,e){return this[0]+=t[0]*e,this[1]+=t[1]*e,this[2]+=t[2]*e,this}distance(t){return Z.distance(this,t)}dist(t){return 0}squaredDistance(t){return Z.squaredDistance(this,t)}sqrDist(t){return 0}negate(){return this[0]*=-1,this[1]*=-1,this[2]*=-1,this}invert(){return this[0]=1/this[0],this[1]=1/this[1],this[2]=1/this[2],this}dot(t){return this[0]*t[0]+this[1]*t[1]+this[2]*t[2]}normalize(){return Z.normalize(this,this)}static create(){return new Z}static clone(t){return new Z(t)}static magnitude(t){let e=t[0],s=t[1],a=t[2];return Math.sqrt(e*e+s*s+a*a)}static mag(t){return 0}static length(t){return 0}static len(t){return 0}static fromValues(t,e,s){return new Z(t,e,s)}static copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}static set(t,e,s,a){return t[0]=e,t[1]=s,t[2]=a,t}static add(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t}static subtract(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t}static sub(t,e,s){return[0,0,0]}static multiply(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t}static mul(t,e,s){return[0,0,0]}static divide(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t}static div(t,e,s){return[0,0,0]}static ceil(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}static floor(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}static min(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t[2]=Math.min(e[2],s[2]),t}static max(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t[2]=Math.max(e[2],s[2]),t}static scale(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}static scaleAndAdd(t,e,s,a){return t[0]=e[0]+s[0]*a,t[1]=e[1]+s[1]*a,t[2]=e[2]+s[2]*a,t}static distance(t,e){const s=e[0]-t[0],a=e[1]-t[1],f=e[2]-t[2];return Math.sqrt(s*s+a*a+f*f)}static dist(t,e){return 0}static squaredDistance(t,e){const s=e[0]-t[0],a=e[1]-t[1],f=e[2]-t[2];return s*s+a*a+f*f}static sqrDist(t,e){return 0}static squaredLength(t){const e=t[0],s=t[1],a=t[2];return e*e+s*s+a*a}static sqrLen(t,e){return 0}static negate(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}static inverse(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}static normalize(t,e){const s=e[0],a=e[1],f=e[2];let o=s*s+a*a+f*f;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static cross(t,e,s){const a=e[0],f=e[1],o=e[2],d=s[0],p=s[1],m=s[2];return t[0]=f*m-o*p,t[1]=o*d-a*m,t[2]=a*p-f*d,t}static lerp(t,e,s,a){const f=e[0],o=e[1],d=e[2];return t[0]=f+a*(s[0]-f),t[1]=o+a*(s[1]-o),t[2]=d+a*(s[2]-d),t}static slerp(t,e,s,a){const f=Math.acos(Math.min(Math.max(Z.dot(e,s),-1),1)),o=Math.sin(f),d=Math.sin((1-a)*f)/o,p=Math.sin(a*f)/o;return t[0]=d*e[0]+p*s[0],t[1]=d*e[1]+p*s[1],t[2]=d*e[2]+p*s[2],t}static hermite(t,e,s,a,f,o){const d=o*o,p=d*(2*o-3)+1,m=d*(o-2)+o,x=d*(o-1),M=d*(3-2*o);return t[0]=e[0]*p+s[0]*m+a[0]*x+f[0]*M,t[1]=e[1]*p+s[1]*m+a[1]*x+f[1]*M,t[2]=e[2]*p+s[2]*m+a[2]*x+f[2]*M,t}static bezier(t,e,s,a,f,o){const d=1-o,p=d*d,m=o*o,x=p*d,M=3*o*p,S=3*m*d,A=m*o;return t[0]=e[0]*x+s[0]*M+a[0]*S+f[0]*A,t[1]=e[1]*x+s[1]*M+a[1]*S+f[1]*A,t[2]=e[2]*x+s[2]*M+a[2]*S+f[2]*A,t}static transformMat4(t,e,s){const a=e[0],f=e[1],o=e[2],d=s[3]*a+s[7]*f+s[11]*o+s[15]||1;return t[0]=(s[0]*a+s[4]*f+s[8]*o+s[12])/d,t[1]=(s[1]*a+s[5]*f+s[9]*o+s[13])/d,t[2]=(s[2]*a+s[6]*f+s[10]*o+s[14])/d,t}static transformMat3(t,e,s){let a=e[0],f=e[1],o=e[2];return t[0]=a*s[0]+f*s[3]+o*s[6],t[1]=a*s[1]+f*s[4]+o*s[7],t[2]=a*s[2]+f*s[5]+o*s[8],t}static transformQuat(t,e,s){const a=s[0],f=s[1],o=s[2],d=s[3]*2,p=e[0],m=e[1],x=e[2],M=f*x-o*m,S=o*p-a*x,A=a*m-f*p,w=(f*A-o*S)*2,b=(o*M-a*A)*2,T=(a*S-f*M)*2;return t[0]=p+M*d+w,t[1]=m+S*d+b,t[2]=x+A*d+T,t}static rotateX(t,e,s,a){const f=s[1],o=s[2],d=e[1]-f,p=e[2]-o;return t[0]=e[0],t[1]=d*Math.cos(a)-p*Math.sin(a)+f,t[2]=d*Math.sin(a)+p*Math.cos(a)+o,t}static rotateY(t,e,s,a){const f=s[0],o=s[2],d=e[0]-f,p=e[2]-o;return t[0]=p*Math.sin(a)+d*Math.cos(a)+f,t[1]=e[1],t[2]=p*Math.cos(a)-d*Math.sin(a)+o,t}static rotateZ(t,e,s,a){const f=s[0],o=s[1],d=e[0]-f,p=e[1]-o;return t[0]=d*Math.cos(a)-p*Math.sin(a)+f,t[1]=d*Math.sin(a)+p*Math.cos(a)+o,t[2]=s[2],t}static angle(t,e){const s=t[0],a=t[1],f=t[2],o=e[0],d=e[1],p=e[2],m=Math.sqrt((s*s+a*a+f*f)*(o*o+d*d+p*p)),x=m&&Z.dot(t,e)/m;return Math.acos(Math.min(Math.max(x,-1),1))}static zero(t){return t[0]=0,t[1]=0,t[2]=0,t}static str(t){return`Vec3(${t.join(", ")})`}static exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}static equals(t,e){const s=t[0],a=t[1],f=t[2],o=e[0],d=e[1],p=e[2];return Math.abs(s-o)<=tt*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(a-d)<=tt*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(f-p)<=tt*Math.max(1,Math.abs(f),Math.abs(p))}}Z.prototype.sub=Z.prototype.subtract,Z.prototype.mul=Z.prototype.multiply,Z.prototype.div=Z.prototype.divide,Z.prototype.dist=Z.prototype.distance,Z.prototype.sqrDist=Z.prototype.squaredDistance,Z.sub=Z.subtract,Z.mul=Z.multiply,Z.div=Z.divide,Z.dist=Z.distance,Z.sqrDist=Z.squaredDistance,Z.sqrLen=Z.squaredLength,Z.mag=Z.magnitude,Z.length=Z.magnitude,Z.len=Z.magnitude;const H=Z,us=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class lt extends Float32Array{static BYTE_LENGTH=16*Float32Array.BYTES_PER_ELEMENT;constructor(...t){switch(t.length){case 16:super(t);break;case 2:super(t[0],t[1],16);break;case 1:const e=t[0];typeof e=="number"?super([e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]):super(e,0,16);break;default:super(us);break}}get str(){return lt.str(this)}copy(t){return this.set(t),this}identity(){return this.set(us),this}multiply(t){return lt.multiply(this,this,t)}mul(t){return this}transpose(){return lt.transpose(this,this)}invert(){return lt.invert(this,this)}translate(t){return lt.translate(this,this,t)}rotate(t,e){return lt.rotate(this,this,t,e)}scale(t){return lt.scale(this,this,t)}rotateX(t){return lt.rotateX(this,this,t)}rotateY(t){return lt.rotateY(this,this,t)}rotateZ(t){return lt.rotateZ(this,this,t)}perspectiveNO(t,e,s,a){return lt.perspectiveNO(this,t,e,s,a)}perspectiveZO(t,e,s,a){return lt.perspectiveZO(this,t,e,s,a)}orthoNO(t,e,s,a,f,o){return lt.orthoNO(this,t,e,s,a,f,o)}orthoZO(t,e,s,a,f,o){return lt.orthoZO(this,t,e,s,a,f,o)}static create(){return new lt}static clone(t){return new lt(t)}static copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}static fromValues(...t){return new lt(...t)}static set(t,...e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}static identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static transpose(t,e){if(t===e){const s=e[1],a=e[2],f=e[3],o=e[6],d=e[7],p=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=s,t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=o,t[11]=e[14],t[12]=f,t[13]=d,t[14]=p}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}static invert(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=e[4],p=e[5],m=e[6],x=e[7],M=e[8],S=e[9],A=e[10],w=e[11],b=e[12],T=e[13],C=e[14],U=e[15],W=s*p-a*d,q=s*m-f*d,z=s*x-o*d,F=a*m-f*p,D=a*x-o*p,it=f*x-o*m,et=M*T-S*b,ot=M*C-A*b,G=M*U-w*b,_t=S*C-A*T,mt=S*U-w*T,pt=A*U-w*C;let V=W*pt-q*mt+z*_t+F*G-D*ot+it*et;return V?(V=1/V,t[0]=(p*pt-m*mt+x*_t)*V,t[1]=(f*mt-a*pt-o*_t)*V,t[2]=(T*it-C*D+U*F)*V,t[3]=(A*D-S*it-w*F)*V,t[4]=(m*G-d*pt-x*ot)*V,t[5]=(s*pt-f*G+o*ot)*V,t[6]=(C*z-b*it-U*q)*V,t[7]=(M*it-A*z+w*q)*V,t[8]=(d*mt-p*G+x*et)*V,t[9]=(a*G-s*mt-o*et)*V,t[10]=(b*D-T*z+U*W)*V,t[11]=(S*z-M*D-w*W)*V,t[12]=(p*ot-d*_t-m*et)*V,t[13]=(s*_t-a*ot+f*et)*V,t[14]=(T*q-b*F-C*W)*V,t[15]=(M*F-S*q+A*W)*V,t):null}static adjoint(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=e[4],p=e[5],m=e[6],x=e[7],M=e[8],S=e[9],A=e[10],w=e[11],b=e[12],T=e[13],C=e[14],U=e[15],W=s*p-a*d,q=s*m-f*d,z=s*x-o*d,F=a*m-f*p,D=a*x-o*p,it=f*x-o*m,et=M*T-S*b,ot=M*C-A*b,G=M*U-w*b,_t=S*C-A*T,mt=S*U-w*T,pt=A*U-w*C;return t[0]=p*pt-m*mt+x*_t,t[1]=f*mt-a*pt-o*_t,t[2]=T*it-C*D+U*F,t[3]=A*D-S*it-w*F,t[4]=m*G-d*pt-x*ot,t[5]=s*pt-f*G+o*ot,t[6]=C*z-b*it-U*q,t[7]=M*it-A*z+w*q,t[8]=d*mt-p*G+x*et,t[9]=a*G-s*mt-o*et,t[10]=b*D-T*z+U*W,t[11]=S*z-M*D-w*W,t[12]=p*ot-d*_t-m*et,t[13]=s*_t-a*ot+f*et,t[14]=T*q-b*F-C*W,t[15]=M*F-S*q+A*W,t}static determinant(t){const e=t[0],s=t[1],a=t[2],f=t[3],o=t[4],d=t[5],p=t[6],m=t[7],x=t[8],M=t[9],S=t[10],A=t[11],w=t[12],b=t[13],T=t[14],C=t[15],U=e*d-s*o,W=e*p-a*o,q=s*p-a*d,z=x*b-M*w,F=x*T-S*w,D=M*T-S*b,it=e*D-s*F+a*z,et=o*D-d*F+p*z,ot=x*q-M*W+S*U,G=w*q-b*W+T*U;return m*it-f*et+C*ot-A*G}static multiply(t,e,s){const a=e[0],f=e[1],o=e[2],d=e[3],p=e[4],m=e[5],x=e[6],M=e[7],S=e[8],A=e[9],w=e[10],b=e[11],T=e[12],C=e[13],U=e[14],W=e[15];let q=s[0],z=s[1],F=s[2],D=s[3];return t[0]=q*a+z*p+F*S+D*T,t[1]=q*f+z*m+F*A+D*C,t[2]=q*o+z*x+F*w+D*U,t[3]=q*d+z*M+F*b+D*W,q=s[4],z=s[5],F=s[6],D=s[7],t[4]=q*a+z*p+F*S+D*T,t[5]=q*f+z*m+F*A+D*C,t[6]=q*o+z*x+F*w+D*U,t[7]=q*d+z*M+F*b+D*W,q=s[8],z=s[9],F=s[10],D=s[11],t[8]=q*a+z*p+F*S+D*T,t[9]=q*f+z*m+F*A+D*C,t[10]=q*o+z*x+F*w+D*U,t[11]=q*d+z*M+F*b+D*W,q=s[12],z=s[13],F=s[14],D=s[15],t[12]=q*a+z*p+F*S+D*T,t[13]=q*f+z*m+F*A+D*C,t[14]=q*o+z*x+F*w+D*U,t[15]=q*d+z*M+F*b+D*W,t}static mul(t,e,s){return t}static translate(t,e,s){const a=s[0],f=s[1],o=s[2];if(e===t)t[12]=e[0]*a+e[4]*f+e[8]*o+e[12],t[13]=e[1]*a+e[5]*f+e[9]*o+e[13],t[14]=e[2]*a+e[6]*f+e[10]*o+e[14],t[15]=e[3]*a+e[7]*f+e[11]*o+e[15];else{const d=e[0],p=e[1],m=e[2],x=e[3],M=e[4],S=e[5],A=e[6],w=e[7],b=e[8],T=e[9],C=e[10],U=e[11];t[0]=d,t[1]=p,t[2]=m,t[3]=x,t[4]=M,t[5]=S,t[6]=A,t[7]=w,t[8]=b,t[9]=T,t[10]=C,t[11]=U,t[12]=d*a+M*f+b*o+e[12],t[13]=p*a+S*f+T*o+e[13],t[14]=m*a+A*f+C*o+e[14],t[15]=x*a+w*f+U*o+e[15]}return t}static scale(t,e,s){const a=s[0],f=s[1],o=s[2];return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*f,t[5]=e[5]*f,t[6]=e[6]*f,t[7]=e[7]*f,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}static rotate(t,e,s,a){let f=a[0],o=a[1],d=a[2],p=Math.sqrt(f*f+o*o+d*d);if(p<tt)return null;p=1/p,f*=p,o*=p,d*=p;const m=Math.sin(s),x=Math.cos(s),M=1-x,S=e[0],A=e[1],w=e[2],b=e[3],T=e[4],C=e[5],U=e[6],W=e[7],q=e[8],z=e[9],F=e[10],D=e[11],it=f*f*M+x,et=o*f*M+d*m,ot=d*f*M-o*m,G=f*o*M-d*m,_t=o*o*M+x,mt=d*o*M+f*m,pt=f*d*M+o*m,V=o*d*M-f*m,kt=d*d*M+x;return t[0]=S*it+T*et+q*ot,t[1]=A*it+C*et+z*ot,t[2]=w*it+U*et+F*ot,t[3]=b*it+W*et+D*ot,t[4]=S*G+T*_t+q*mt,t[5]=A*G+C*_t+z*mt,t[6]=w*G+U*_t+F*mt,t[7]=b*G+W*_t+D*mt,t[8]=S*pt+T*V+q*kt,t[9]=A*pt+C*V+z*kt,t[10]=w*pt+U*V+F*kt,t[11]=b*pt+W*V+D*kt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}static rotateX(t,e,s){let a=Math.sin(s),f=Math.cos(s),o=e[4],d=e[5],p=e[6],m=e[7],x=e[8],M=e[9],S=e[10],A=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*f+x*a,t[5]=d*f+M*a,t[6]=p*f+S*a,t[7]=m*f+A*a,t[8]=x*f-o*a,t[9]=M*f-d*a,t[10]=S*f-p*a,t[11]=A*f-m*a,t}static rotateY(t,e,s){let a=Math.sin(s),f=Math.cos(s),o=e[0],d=e[1],p=e[2],m=e[3],x=e[8],M=e[9],S=e[10],A=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*f-x*a,t[1]=d*f-M*a,t[2]=p*f-S*a,t[3]=m*f-A*a,t[8]=o*a+x*f,t[9]=d*a+M*f,t[10]=p*a+S*f,t[11]=m*a+A*f,t}static rotateZ(t,e,s){let a=Math.sin(s),f=Math.cos(s),o=e[0],d=e[1],p=e[2],m=e[3],x=e[4],M=e[5],S=e[6],A=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*f+x*a,t[1]=d*f+M*a,t[2]=p*f+S*a,t[3]=m*f+A*a,t[4]=x*f-o*a,t[5]=M*f-d*a,t[6]=S*f-p*a,t[7]=A*f-m*a,t}static fromTranslation(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}static fromScaling(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromRotation(t,e,s){let a=s[0],f=s[1],o=s[2],d=Math.sqrt(a*a+f*f+o*o);if(d<tt)return null;d=1/d,a*=d,f*=d,o*=d;const p=Math.sin(e),m=Math.cos(e),x=1-m;return t[0]=a*a*x+m,t[1]=f*a*x+o*p,t[2]=o*a*x-f*p,t[3]=0,t[4]=a*f*x-o*p,t[5]=f*f*x+m,t[6]=o*f*x+a*p,t[7]=0,t[8]=a*o*x+f*p,t[9]=f*o*x-a*p,t[10]=o*o*x+m,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromXRotation(t,e){let s=Math.sin(e),a=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=s,t[7]=0,t[8]=0,t[9]=-s,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromYRotation(t,e){let s=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=0,t[2]=-s,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=s,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromZRotation(t,e){const s=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=s,t[2]=0,t[3]=0,t[4]=-s,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromRotationTranslation(t,e,s){const a=e[0],f=e[1],o=e[2],d=e[3],p=a+a,m=f+f,x=o+o,M=a*p,S=a*m,A=a*x,w=f*m,b=f*x,T=o*x,C=d*p,U=d*m,W=d*x;return t[0]=1-(w+T),t[1]=S+W,t[2]=A-U,t[3]=0,t[4]=S-W,t[5]=1-(M+T),t[6]=b+C,t[7]=0,t[8]=A+U,t[9]=b-C,t[10]=1-(M+w),t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}static fromQuat2(t,e){let s=new Z;const a=-e[0],f=-e[1],o=-e[2],d=e[3],p=e[4],m=e[5],x=e[6],M=e[7];let S=a*a+f*f+o*o+d*d;return S>0?(s[0]=(p*d+M*a+m*o-x*f)*2/S,s[1]=(m*d+M*f+x*a-p*o)*2/S,s[2]=(x*d+M*o+p*f-m*a)*2/S):(s[0]=(p*d+M*a+m*o-x*f)*2,s[1]=(m*d+M*f+x*a-p*o)*2,s[2]=(x*d+M*o+p*f-m*a)*2),lt.fromRotationTranslation(t,e,s),t}static getTranslation(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}static getScaling(t,e){const s=e[0],a=e[1],f=e[2],o=e[4],d=e[5],p=e[6],m=e[8],x=e[9],M=e[10];return t[0]=Math.sqrt(s*s+a*a+f*f),t[1]=Math.sqrt(o*o+d*d+p*p),t[2]=Math.sqrt(m*m+x*x+M*M),t}static getRotation(t,e){lt.getScaling(Ge,e);const s=1/Ge[0],a=1/Ge[1],f=1/Ge[2],o=e[0]*s,d=e[1]*a,p=e[2]*f,m=e[4]*s,x=e[5]*a,M=e[6]*f,S=e[8]*s,A=e[9]*a,w=e[10]*f,b=o+x+w;let T=0;return b>0?(T=Math.sqrt(b+1)*2,t[3]=.25*T,t[0]=(M-A)/T,t[1]=(S-p)/T,t[2]=(d-m)/T):o>x&&o>w?(T=Math.sqrt(1+o-x-w)*2,t[3]=(M-A)/T,t[0]=.25*T,t[1]=(d+m)/T,t[2]=(S+p)/T):x>w?(T=Math.sqrt(1+x-o-w)*2,t[3]=(S-p)/T,t[0]=(d+m)/T,t[1]=.25*T,t[2]=(M+A)/T):(T=Math.sqrt(1+w-o-x)*2,t[3]=(d-m)/T,t[0]=(S+p)/T,t[1]=(M+A)/T,t[2]=.25*T),t}static decompose(t,e,s,a){e[0]=a[12],e[1]=a[13],e[2]=a[14];const f=a[0],o=a[1],d=a[2],p=a[4],m=a[5],x=a[6],M=a[8],S=a[9],A=a[10];s[0]=Math.sqrt(f*f+o*o+d*d),s[1]=Math.sqrt(p*p+m*m+x*x),s[2]=Math.sqrt(M*M+S*S+A*A);const w=1/s[0],b=1/s[1],T=1/s[2],C=f*w,U=o*b,W=d*T,q=p*w,z=m*b,F=x*T,D=M*w,it=S*b,et=A*T,ot=C+z+et;let G=0;return ot>0?(G=Math.sqrt(ot+1)*2,t[3]=.25*G,t[0]=(F-it)/G,t[1]=(D-W)/G,t[2]=(U-q)/G):C>z&&C>et?(G=Math.sqrt(1+C-z-et)*2,t[3]=(F-it)/G,t[0]=.25*G,t[1]=(U+q)/G,t[2]=(D+W)/G):z>et?(G=Math.sqrt(1+z-C-et)*2,t[3]=(D-W)/G,t[0]=(U+q)/G,t[1]=.25*G,t[2]=(F+it)/G):(G=Math.sqrt(1+et-C-z)*2,t[3]=(U-q)/G,t[0]=(D+W)/G,t[1]=(F+it)/G,t[2]=.25*G),t}static fromRotationTranslationScale(t,e,s,a){const f=e[0],o=e[1],d=e[2],p=e[3],m=f+f,x=o+o,M=d+d,S=f*m,A=f*x,w=f*M,b=o*x,T=o*M,C=d*M,U=p*m,W=p*x,q=p*M,z=a[0],F=a[1],D=a[2];return t[0]=(1-(b+C))*z,t[1]=(A+q)*z,t[2]=(w-W)*z,t[3]=0,t[4]=(A-q)*F,t[5]=(1-(S+C))*F,t[6]=(T+U)*F,t[7]=0,t[8]=(w+W)*D,t[9]=(T-U)*D,t[10]=(1-(S+b))*D,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}static fromRotationTranslationScaleOrigin(t,e,s,a,f){const o=e[0],d=e[1],p=e[2],m=e[3],x=o+o,M=d+d,S=p+p,A=o*x,w=o*M,b=o*S,T=d*M,C=d*S,U=p*S,W=m*x,q=m*M,z=m*S,F=a[0],D=a[1],it=a[2],et=f[0],ot=f[1],G=f[2],_t=(1-(T+U))*F,mt=(w+z)*F,pt=(b-q)*F,V=(w-z)*D,kt=(1-(A+U))*D,Gt=(C+W)*D,Ft=(b+q)*it,Ze=(C-W)*it,Nn=(1-(A+T))*it;return t[0]=_t,t[1]=mt,t[2]=pt,t[3]=0,t[4]=V,t[5]=kt,t[6]=Gt,t[7]=0,t[8]=Ft,t[9]=Ze,t[10]=Nn,t[11]=0,t[12]=s[0]+et-(_t*et+V*ot+Ft*G),t[13]=s[1]+ot-(mt*et+kt*ot+Ze*G),t[14]=s[2]+G-(pt*et+Gt*ot+Nn*G),t[15]=1,t}static fromQuat(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=s+s,p=a+a,m=f+f,x=s*d,M=a*d,S=a*p,A=f*d,w=f*p,b=f*m,T=o*d,C=o*p,U=o*m;return t[0]=1-S-b,t[1]=M+U,t[2]=A-C,t[3]=0,t[4]=M-U,t[5]=1-x-b,t[6]=w+T,t[7]=0,t[8]=A+C,t[9]=w-T,t[10]=1-x-S,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static frustum(t,e,s,a,f,o,d){const p=1/(s-e),m=1/(f-a),x=1/(o-d);return t[0]=o*2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*m,t[6]=0,t[7]=0,t[8]=(s+e)*p,t[9]=(f+a)*m,t[10]=(d+o)*x,t[11]=-1,t[12]=0,t[13]=0,t[14]=d*o*2*x,t[15]=0,t}static perspectiveNO(t,e,s,a,f){const o=1/Math.tan(e/2);if(t[0]=o/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,f!=null&&f!==1/0){const d=1/(a-f);t[10]=(f+a)*d,t[14]=2*f*a*d}else t[10]=-1,t[14]=-2*a;return t}static perspective(t,e,s,a,f){return t}static perspectiveZO(t,e,s,a,f){const o=1/Math.tan(e/2);if(t[0]=o/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,f!=null&&f!==1/0){const d=1/(a-f);t[10]=f*d,t[14]=f*a*d}else t[10]=-1,t[14]=-a;return t}static perspectiveFromFieldOfView(t,e,s,a){const f=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),d=Math.tan(e.leftDegrees*Math.PI/180),p=Math.tan(e.rightDegrees*Math.PI/180),m=2/(d+p),x=2/(f+o);return t[0]=m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=-((d-p)*m*.5),t[9]=(f-o)*x*.5,t[10]=a/(s-a),t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s/(s-a),t[15]=0,t}static orthoNO(t,e,s,a,f,o,d){const p=1/(e-s),m=1/(a-f),x=1/(o-d);return t[0]=-2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*m,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*x,t[11]=0,t[12]=(e+s)*p,t[13]=(f+a)*m,t[14]=(d+o)*x,t[15]=1,t}static ortho(t,e,s,a,f,o,d){return t}static orthoZO(t,e,s,a,f,o,d){const p=1/(e-s),m=1/(a-f),x=1/(o-d);return t[0]=-2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*m,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=x,t[11]=0,t[12]=(e+s)*p,t[13]=(f+a)*m,t[14]=o*x,t[15]=1,t}static lookAt(t,e,s,a){const f=e[0],o=e[1],d=e[2],p=a[0],m=a[1],x=a[2],M=s[0],S=s[1],A=s[2];if(Math.abs(f-M)<tt&&Math.abs(o-S)<tt&&Math.abs(d-A)<tt)return lt.identity(t);let w=f-M,b=o-S,T=d-A,C=1/Math.sqrt(w*w+b*b+T*T);w*=C,b*=C,T*=C;let U=m*T-x*b,W=x*w-p*T,q=p*b-m*w;C=Math.sqrt(U*U+W*W+q*q),C?(C=1/C,U*=C,W*=C,q*=C):(U=0,W=0,q=0);let z=b*q-T*W,F=T*U-w*q,D=w*W-b*U;return C=Math.sqrt(z*z+F*F+D*D),C?(C=1/C,z*=C,F*=C,D*=C):(z=0,F=0,D=0),t[0]=U,t[1]=z,t[2]=w,t[3]=0,t[4]=W,t[5]=F,t[6]=b,t[7]=0,t[8]=q,t[9]=D,t[10]=T,t[11]=0,t[12]=-(U*f+W*o+q*d),t[13]=-(z*f+F*o+D*d),t[14]=-(w*f+b*o+T*d),t[15]=1,t}static targetTo(t,e,s,a){const f=e[0],o=e[1],d=e[2],p=a[0],m=a[1],x=a[2];let M=f-s[0],S=o-s[1],A=d-s[2],w=M*M+S*S+A*A;w>0&&(w=1/Math.sqrt(w),M*=w,S*=w,A*=w);let b=m*A-x*S,T=x*M-p*A,C=p*S-m*M;return w=b*b+T*T+C*C,w>0&&(w=1/Math.sqrt(w),b*=w,T*=w,C*=w),t[0]=b,t[1]=T,t[2]=C,t[3]=0,t[4]=S*C-A*T,t[5]=A*b-M*C,t[6]=M*T-S*b,t[7]=0,t[8]=M,t[9]=S,t[10]=A,t[11]=0,t[12]=f,t[13]=o,t[14]=d,t[15]=1,t}static frob(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8]+t[9]*t[9]+t[10]*t[10]+t[11]*t[11]+t[12]*t[12]+t[13]*t[13]+t[14]*t[14]+t[15]*t[15])}static add(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t[9]=e[9]+s[9],t[10]=e[10]+s[10],t[11]=e[11]+s[11],t[12]=e[12]+s[12],t[13]=e[13]+s[13],t[14]=e[14]+s[14],t[15]=e[15]+s[15],t}static subtract(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t[9]=e[9]-s[9],t[10]=e[10]-s[10],t[11]=e[11]-s[11],t[12]=e[12]-s[12],t[13]=e[13]-s[13],t[14]=e[14]-s[14],t[15]=e[15]-s[15],t}static sub(t,e,s){return t}static multiplyScalar(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12]*s,t[13]=e[13]*s,t[14]=e[14]*s,t[15]=e[15]*s,t}static multiplyScalarAndAdd(t,e,s,a){return t[0]=e[0]+s[0]*a,t[1]=e[1]+s[1]*a,t[2]=e[2]+s[2]*a,t[3]=e[3]+s[3]*a,t[4]=e[4]+s[4]*a,t[5]=e[5]+s[5]*a,t[6]=e[6]+s[6]*a,t[7]=e[7]+s[7]*a,t[8]=e[8]+s[8]*a,t[9]=e[9]+s[9]*a,t[10]=e[10]+s[10]*a,t[11]=e[11]+s[11]*a,t[12]=e[12]+s[12]*a,t[13]=e[13]+s[13]*a,t[14]=e[14]+s[14]*a,t[15]=e[15]+s[15]*a,t}static exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}static equals(t,e){const s=t[0],a=t[1],f=t[2],o=t[3],d=t[4],p=t[5],m=t[6],x=t[7],M=t[8],S=t[9],A=t[10],w=t[11],b=t[12],T=t[13],C=t[14],U=t[15],W=e[0],q=e[1],z=e[2],F=e[3],D=e[4],it=e[5],et=e[6],ot=e[7],G=e[8],_t=e[9],mt=e[10],pt=e[11],V=e[12],kt=e[13],Gt=e[14],Ft=e[15];return Math.abs(s-W)<=tt*Math.max(1,Math.abs(s),Math.abs(W))&&Math.abs(a-q)<=tt*Math.max(1,Math.abs(a),Math.abs(q))&&Math.abs(f-z)<=tt*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(o-F)<=tt*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(d-D)<=tt*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(p-it)<=tt*Math.max(1,Math.abs(p),Math.abs(it))&&Math.abs(m-et)<=tt*Math.max(1,Math.abs(m),Math.abs(et))&&Math.abs(x-ot)<=tt*Math.max(1,Math.abs(x),Math.abs(ot))&&Math.abs(M-G)<=tt*Math.max(1,Math.abs(M),Math.abs(G))&&Math.abs(S-_t)<=tt*Math.max(1,Math.abs(S),Math.abs(_t))&&Math.abs(A-mt)<=tt*Math.max(1,Math.abs(A),Math.abs(mt))&&Math.abs(w-pt)<=tt*Math.max(1,Math.abs(w),Math.abs(pt))&&Math.abs(b-V)<=tt*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(T-kt)<=tt*Math.max(1,Math.abs(T),Math.abs(kt))&&Math.abs(C-Gt)<=tt*Math.max(1,Math.abs(C),Math.abs(Gt))&&Math.abs(U-Ft)<=tt*Math.max(1,Math.abs(U),Math.abs(Ft))}static str(t){return`Mat4(${t.join(", ")})`}}const Ge=new Z;lt.prototype.mul=lt.prototype.multiply,lt.sub=lt.subtract,lt.mul=lt.multiply,lt.perspective=lt.perspectiveNO,lt.ortho=lt.orthoNO;const dt=lt;class J extends Float32Array{static BYTE_LENGTH=4*Float32Array.BYTES_PER_ELEMENT;constructor(...t){switch(t.length){case 4:super(t);break;case 2:super(t[0],t[1],4);break;case 1:{const e=t[0];typeof e=="number"?super([e,e,e,e]):super(e,0,4);break}default:super(4);break}}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}get w(){return this[3]}set w(t){this[3]=t}get r(){return this[0]}set r(t){this[0]=t}get g(){return this[1]}set g(t){this[1]=t}get b(){return this[2]}set b(t){this[2]=t}get a(){return this[3]}set a(t){this[3]=t}get magnitude(){const t=this[0],e=this[1],s=this[2],a=this[3];return Math.sqrt(t*t+e*e+s*s+a*a)}get mag(){return this.magnitude}get str(){return J.str(this)}copy(t){return super.set(t),this}add(t){return this[0]+=t[0],this[1]+=t[1],this[2]+=t[2],this[3]+=t[3],this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this[3]-=t[3],this}sub(t){return this}multiply(t){return this[0]*=t[0],this[1]*=t[1],this[2]*=t[2],this[3]*=t[3],this}mul(t){return this}divide(t){return this[0]/=t[0],this[1]/=t[1],this[2]/=t[2],this[3]/=t[3],this}div(t){return this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this}scaleAndAdd(t,e){return this[0]+=t[0]*e,this[1]+=t[1]*e,this[2]+=t[2]*e,this[3]+=t[3]*e,this}distance(t){return J.distance(this,t)}dist(t){return 0}squaredDistance(t){return J.squaredDistance(this,t)}sqrDist(t){return 0}negate(){return this[0]*=-1,this[1]*=-1,this[2]*=-1,this[3]*=-1,this}invert(){return this[0]=1/this[0],this[1]=1/this[1],this[2]=1/this[2],this[3]=1/this[3],this}dot(t){return this[0]*t[0]+this[1]*t[1]+this[2]*t[2]+this[3]*t[3]}normalize(){return J.normalize(this,this)}static create(){return new J}static clone(t){return new J(t)}static fromValues(t,e,s,a){return new J(t,e,s,a)}static copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}static set(t,e,s,a,f){return t[0]=e,t[1]=s,t[2]=a,t[3]=f,t}static add(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t}static subtract(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t}static sub(t,e,s){return t}static multiply(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t[3]=e[3]*s[3],t}static mul(t,e,s){return t}static divide(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t[3]=e[3]/s[3],t}static div(t,e,s){return t}static ceil(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}static floor(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}static min(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t[2]=Math.min(e[2],s[2]),t[3]=Math.min(e[3],s[3]),t}static max(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t[2]=Math.max(e[2],s[2]),t[3]=Math.max(e[3],s[3]),t}static round(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}static scale(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t}static scaleAndAdd(t,e,s,a){return t[0]=e[0]+s[0]*a,t[1]=e[1]+s[1]*a,t[2]=e[2]+s[2]*a,t[3]=e[3]+s[3]*a,t}static distance(t,e){const s=e[0]-t[0],a=e[1]-t[1],f=e[2]-t[2],o=e[3]-t[3];return Math.hypot(s,a,f,o)}static dist(t,e){return 0}static squaredDistance(t,e){const s=e[0]-t[0],a=e[1]-t[1],f=e[2]-t[2],o=e[3]-t[3];return s*s+a*a+f*f+o*o}static sqrDist(t,e){return 0}static magnitude(t){const e=t[0],s=t[1],a=t[2],f=t[3];return Math.sqrt(e*e+s*s+a*a+f*f)}static mag(t){return 0}static length(t){return 0}static len(t){return 0}static squaredLength(t){const e=t[0],s=t[1],a=t[2],f=t[3];return e*e+s*s+a*a+f*f}static sqrLen(t){return 0}static negate(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}static inverse(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}static normalize(t,e){const s=e[0],a=e[1],f=e[2],o=e[3];let d=s*s+a*a+f*f+o*o;return d>0&&(d=1/Math.sqrt(d)),t[0]=s*d,t[1]=a*d,t[2]=f*d,t[3]=o*d,t}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}static cross(t,e,s,a){const f=s[0]*a[1]-s[1]*a[0],o=s[0]*a[2]-s[2]*a[0],d=s[0]*a[3]-s[3]*a[0],p=s[1]*a[2]-s[2]*a[1],m=s[1]*a[3]-s[3]*a[1],x=s[2]*a[3]-s[3]*a[2],M=e[0],S=e[1],A=e[2],w=e[3];return t[0]=S*x-A*m+w*p,t[1]=-(M*x)+A*d-w*o,t[2]=M*m-S*d+w*f,t[3]=-(M*p)+S*o-A*f,t}static lerp(t,e,s,a){const f=e[0],o=e[1],d=e[2],p=e[3];return t[0]=f+a*(s[0]-f),t[1]=o+a*(s[1]-o),t[2]=d+a*(s[2]-d),t[3]=p+a*(s[3]-p),t}static transformMat4(t,e,s){const a=e[0],f=e[1],o=e[2],d=e[3];return t[0]=s[0]*a+s[4]*f+s[8]*o+s[12]*d,t[1]=s[1]*a+s[5]*f+s[9]*o+s[13]*d,t[2]=s[2]*a+s[6]*f+s[10]*o+s[14]*d,t[3]=s[3]*a+s[7]*f+s[11]*o+s[15]*d,t}static transformQuat(t,e,s){const a=e[0],f=e[1],o=e[2],d=s[0],p=s[1],m=s[2],x=s[3],M=x*a+p*o-m*f,S=x*f+m*a-d*o,A=x*o+d*f-p*a,w=-d*a-p*f-m*o;return t[0]=M*x+w*-d+S*-m-A*-p,t[1]=S*x+w*-p+A*-d-M*-m,t[2]=A*x+w*-m+M*-p-S*-d,t[3]=e[3],t}static zero(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}static str(t){return`Vec4(${t.join(", ")})`}static exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}static equals(t,e){const s=t[0],a=t[1],f=t[2],o=t[3],d=e[0],p=e[1],m=e[2],x=e[3];return Math.abs(s-d)<=tt*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-p)<=tt*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(f-m)<=tt*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(o-x)<=tt*Math.max(1,Math.abs(o),Math.abs(x))}}J.prototype.sub=J.prototype.subtract,J.prototype.mul=J.prototype.multiply,J.prototype.div=J.prototype.divide,J.prototype.dist=J.prototype.distance,J.prototype.sqrDist=J.prototype.squaredDistance,J.sub=J.subtract,J.mul=J.multiply,J.div=J.divide,J.dist=J.distance,J.sqrDist=J.squaredDistance,J.sqrLen=J.squaredLength,J.mag=J.magnitude,J.length=J.magnitude,J.len=J.magnitude;const _e=J;class k extends Float32Array{static BYTE_LENGTH=4*Float32Array.BYTES_PER_ELEMENT;constructor(...t){switch(t.length){case 4:super(t);break;case 2:super(t[0],t[1],4);break;case 1:{const e=t[0];typeof e=="number"?super([e,e,e,e]):super(e,0,4);break}default:super(4),this[3]=1;break}}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}get w(){return this[3]}set w(t){this[3]=t}get magnitude(){const t=this[0],e=this[1],s=this[2],a=this[3];return Math.sqrt(t*t+e*e+s*s+a*a)}get mag(){return this.magnitude}get str(){return k.str(this)}copy(t){return super.set(t),this}identity(){return this[0]=0,this[1]=0,this[2]=0,this[3]=1,this}multiply(t){return k.multiply(this,this,t)}mul(t){return this}rotateX(t){return k.rotateX(this,this,t)}rotateY(t){return k.rotateY(this,this,t)}rotateZ(t){return k.rotateZ(this,this,t)}invert(){return k.invert(this,this)}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this}dot(t){return k.dot(this,t)}static create(){return new k}static identity(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}static setAxisAngle(t,e,s){s=s*.5;const a=Math.sin(s);return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=Math.cos(s),t}static getAxisAngle(t,e){const s=Math.acos(e[3])*2,a=Math.sin(s/2);return a>tt?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=1,t[1]=0,t[2]=0),s}static getAngle(t,e){const s=k.dot(t,e);return Math.acos(2*s*s-1)}static multiply(t,e,s){const a=e[0],f=e[1],o=e[2],d=e[3],p=s[0],m=s[1],x=s[2],M=s[3];return t[0]=a*M+d*p+f*x-o*m,t[1]=f*M+d*m+o*p-a*x,t[2]=o*M+d*x+a*m-f*p,t[3]=d*M-a*p-f*m-o*x,t}static rotateX(t,e,s){s*=.5;const a=e[0],f=e[1],o=e[2],d=e[3],p=Math.sin(s),m=Math.cos(s);return t[0]=a*m+d*p,t[1]=f*m+o*p,t[2]=o*m-f*p,t[3]=d*m-a*p,t}static rotateY(t,e,s){s*=.5;const a=e[0],f=e[1],o=e[2],d=e[3],p=Math.sin(s),m=Math.cos(s);return t[0]=a*m-o*p,t[1]=f*m+d*p,t[2]=o*m+a*p,t[3]=d*m-f*p,t}static rotateZ(t,e,s){s*=.5;const a=e[0],f=e[1],o=e[2],d=e[3],p=Math.sin(s),m=Math.cos(s);return t[0]=a*m+f*p,t[1]=f*m-a*p,t[2]=o*m+d*p,t[3]=d*m-o*p,t}static calculateW(t,e){const s=e[0],a=e[1],f=e[2];return t[0]=s,t[1]=a,t[2]=f,t[3]=Math.sqrt(Math.abs(1-s*s-a*a-f*f)),t}static exp(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=Math.sqrt(s*s+a*a+f*f),p=Math.exp(o),m=d>0?p*Math.sin(d)/d:0;return t[0]=s*m,t[1]=a*m,t[2]=f*m,t[3]=p*Math.cos(d),t}static ln(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=Math.sqrt(s*s+a*a+f*f),p=d>0?Math.atan2(d,o)/d:0;return t[0]=s*p,t[1]=a*p,t[2]=f*p,t[3]=.5*Math.log(s*s+a*a+f*f+o*o),t}static pow(t,e,s){return k.ln(t,e),k.scale(t,t,s),k.exp(t,t),t}static slerp(t,e,s,a){const f=e[0],o=e[1],d=e[2],p=e[3];let m=s[0],x=s[1],M=s[2],S=s[3],A,w,b=f*m+o*x+d*M+p*S;if(b<0&&(b=-b,m=-m,x=-x,M=-M,S=-S),1-b>tt){const T=Math.acos(b),C=Math.sin(T);A=Math.sin((1-a)*T)/C,w=Math.sin(a*T)/C}else A=1-a,w=a;return t[0]=A*f+w*m,t[1]=A*o+w*x,t[2]=A*d+w*M,t[3]=A*p+w*S,t}static invert(t,e){const s=e[0],a=e[1],f=e[2],o=e[3],d=s*s+a*a+f*f+o*o,p=d?1/d:0;return t[0]=-s*p,t[1]=-a*p,t[2]=-f*p,t[3]=o*p,t}static conjugate(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}static fromMat3(t,e){const s=e[0]+e[4]+e[8];let a;if(s>0)a=Math.sqrt(s+1),t[3]=.5*a,a=.5/a,t[0]=(e[5]-e[7])*a,t[1]=(e[6]-e[2])*a,t[2]=(e[1]-e[3])*a;else{let f=0;e[4]>e[0]&&(f=1),e[8]>e[f*3+f]&&(f=2);let o=(f+1)%3,d=(f+2)%3;a=Math.sqrt(e[f*3+f]-e[o*3+o]-e[d*3+d]+1),t[f]=.5*a,a=.5/a,t[3]=(e[o*3+d]-e[d*3+o])*a,t[o]=(e[o*3+f]+e[f*3+o])*a,t[d]=(e[d*3+f]+e[f*3+d])*a}return t}static fromEuler(t,e,s,a){let f=.5*Math.PI/180;e*=f,s*=f,a*=f;let o=Math.sin(e),d=Math.cos(e),p=Math.sin(s),m=Math.cos(s),x=Math.sin(a),M=Math.cos(a);return t[0]=o*m*M-d*p*x,t[1]=d*p*M+o*m*x,t[2]=d*m*x-o*p*M,t[3]=d*m*M+o*p*x,t}static str(t){return`Quat(${t.join(", ")})`}static clone(t){return new k(t)}static fromValues(t,e,s,a){return new k(t,e,s,a)}static copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}static set(t,e,s,a,f){return t}static add(t,e,s){return t}static mul(t,e,s){return t}static scale(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}static lerp(t,e,s,a){return t}static magnitude(t){return 0}static mag(t){return 0}static length(t){return 0}static len(t){return 0}static squaredLength(t){return 0}static sqrLen(t){return 0}static normalize(t,e){return t}static exactEquals(t,e){return!1}static equals(t,e){return!1}static rotationTo(t,e,s){let a=Z.dot(e,s);return a<-.999999?(Z.cross(pn,af,e),Z.len(pn)<1e-6&&Z.cross(pn,ff,e),Z.normalize(pn,pn),k.setAxisAngle(t,pn,Math.PI),t):a>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Z.cross(pn,e,s),t[0]=pn[0],t[1]=pn[1],t[2]=pn[2],t[3]=1+a,k.normalize(t,t))}static sqlerp(t,e,s,a,f,o){return k.slerp(ds,e,f,o),k.slerp(ps,s,a,o),k.slerp(t,ds,ps,2*o*(1-o)),t}static setAxes(t,e,s,a){return dn[0]=s[0],dn[3]=s[1],dn[6]=s[2],dn[1]=a[0],dn[4]=a[1],dn[7]=a[2],dn[2]=-e[0],dn[5]=-e[1],dn[8]=-e[2],k.normalize(t,k.fromMat3(t,dn))}}const ds=new k,ps=new k,dn=new bt,pn=new Z,af=new Z(1,0,0),ff=new Z(0,1,0);k.set=J.set,k.add=J.add,k.lerp=J.lerp,k.normalize=J.normalize,k.squaredLength=J.squaredLength,k.sqrLen=J.squaredLength,k.exactEquals=J.exactEquals,k.equals=J.equals,k.magnitude=J.magnitude,k.prototype.mul=k.prototype.multiply,k.mul=k.multiply,k.mag=k.magnitude,k.length=k.magnitude,k.len=k.magnitude;const Ke=k;class ct extends Float32Array{static BYTE_LENGTH=2*Float32Array.BYTES_PER_ELEMENT;constructor(...t){switch(t.length){case 2:{const e=t[0];typeof e=="number"?super([e,t[1]]):super(e,t[1],2);break}case 1:{const e=t[0];typeof e=="number"?super([e,e]):super(e,0,2);break}default:super(2);break}}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get r(){return this[0]}set r(t){this[0]=t}get g(){return this[1]}set g(t){this[1]=t}get magnitude(){return Math.hypot(this[0],this[1])}get mag(){return this.magnitude}get squaredMagnitude(){const t=this[0],e=this[1];return t*t+e*e}get sqrMag(){return this.squaredMagnitude}get str(){return ct.str(this)}copy(t){return this.set(t),this}add(t){return this[0]+=t[0],this[1]+=t[1],this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this}sub(t){return this}multiply(t){return this[0]*=t[0],this[1]*=t[1],this}mul(t){return this}divide(t){return this[0]/=t[0],this[1]/=t[1],this}div(t){return this}scale(t){return this[0]*=t,this[1]*=t,this}scaleAndAdd(t,e){return this[0]+=t[0]*e,this[1]+=t[1]*e,this}distance(t){return ct.distance(this,t)}dist(t){return 0}squaredDistance(t){return ct.squaredDistance(this,t)}sqrDist(t){return 0}negate(){return this[0]*=-1,this[1]*=-1,this}invert(){return this[0]=1/this[0],this[1]=1/this[1],this}dot(t){return this[0]*t[0]+this[1]*t[1]}normalize(){return ct.normalize(this,this)}static create(){return new ct}static clone(t){return new ct(t)}static fromValues(t,e){return new ct(t,e)}static copy(t,e){return t[0]=e[0],t[1]=e[1],t}static set(t,e,s){return t[0]=e,t[1]=s,t}static add(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t}static subtract(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t}static sub(t,e,s){return[0,0]}static multiply(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t}static mul(t,e,s){return[0,0]}static divide(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t}static div(t,e,s){return[0,0]}static ceil(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}static floor(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}static min(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t}static max(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t}static round(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}static scale(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t}static scaleAndAdd(t,e,s,a){return t[0]=e[0]+s[0]*a,t[1]=e[1]+s[1]*a,t}static distance(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}static dist(t,e){return 0}static squaredDistance(t,e){const s=e[0]-t[0],a=e[1]-t[1];return s*s+a*a}static sqrDist(t,e){return 0}static magnitude(t){let e=t[0],s=t[1];return Math.sqrt(e*e+s*s)}static mag(t){return 0}static length(t){return 0}static len(t){return 0}static squaredLength(t){const e=t[0],s=t[1];return e*e+s*s}static sqrLen(t,e){return 0}static negate(t,e){return t[0]=-e[0],t[1]=-e[1],t}static inverse(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}static normalize(t,e){const s=e[0],a=e[1];let f=s*s+a*a;return f>0&&(f=1/Math.sqrt(f)),t[0]=e[0]*f,t[1]=e[1]*f,t}static dot(t,e){return t[0]*e[0]+t[1]*e[1]}static cross(t,e,s){const a=e[0]*s[1]-e[1]*s[0];return t[0]=t[1]=0,t[2]=a,t}static lerp(t,e,s,a){const f=e[0],o=e[1];return t[0]=f+a*(s[0]-f),t[1]=o+a*(s[1]-o),t}static transformMat2(t,e,s){const a=e[0],f=e[1];return t[0]=s[0]*a+s[2]*f,t[1]=s[1]*a+s[3]*f,t}static transformMat2d(t,e,s){const a=e[0],f=e[1];return t[0]=s[0]*a+s[2]*f+s[4],t[1]=s[1]*a+s[3]*f+s[5],t}static transformMat3(t,e,s){const a=e[0],f=e[1];return t[0]=s[0]*a+s[3]*f+s[6],t[1]=s[1]*a+s[4]*f+s[7],t}static transformMat4(t,e,s){const a=e[0],f=e[1];return t[0]=s[0]*a+s[4]*f+s[12],t[1]=s[1]*a+s[5]*f+s[13],t}static rotate(t,e,s,a){const f=e[0]-s[0],o=e[1]-s[1],d=Math.sin(a),p=Math.cos(a);return t[0]=f*p-o*d+s[0],t[1]=f*d+o*p+s[1],t}static angle(t,e){const s=t[0],a=t[1],f=e[0],o=e[1],d=Math.sqrt(s*s+a*a)*Math.sqrt(f*f+o*o),p=d&&(s*f+a*o)/d;return Math.acos(Math.min(Math.max(p,-1),1))}static zero(t){return t[0]=0,t[1]=0,t}static exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]}static equals(t,e){const s=t[0],a=t[1],f=e[0],o=e[1];return Math.abs(s-f)<=tt*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(a-o)<=tt*Math.max(1,Math.abs(a),Math.abs(o))}static str(t){return`Vec2(${t.join(", ")})`}}ct.prototype.sub=ct.prototype.subtract,ct.prototype.mul=ct.prototype.multiply,ct.prototype.div=ct.prototype.divide,ct.prototype.dist=ct.prototype.distance,ct.prototype.sqrDist=ct.prototype.squaredDistance,ct.sub=ct.subtract,ct.mul=ct.multiply,ct.div=ct.divide,ct.dist=ct.distance,ct.sqrDist=ct.squaredDistance,ct.sqrLen=ct.squaredLength,ct.mag=ct.magnitude,ct.length=ct.magnitude,ct.len=ct.magnitude;const Rn=ct;class ve extends He{constructor(){super()}name;matrix=dt.create();location;findUniformInfo(){return xe.current.m_uniformLocations[this.name]}update(){xe.current.gl.uniformMatrix4fv(this.location,!1,this.matrix)}updateMatrix(t){this.matrix=t}}class hf extends Set{constructor(){super()}}class of extends ve{constructor(t){super(),this.modelMatrix=t}name="uNormalMatrix";normalMatrix=Ye.create();update(){const t=this.modelMatrix.matrix,e=Ye.fromMat4(this.normalMatrix,t);Ye.invert(e,e),Ye.transpose(e,e)}tie(t){const e=this.findUniformInfo();if(!e)return;this.location=e.location,this.update(),t.uniformMatrix3fv(this.location,!1,this.normalMatrix)}}class In extends ve{static current;defaultUniform;constructor(t){super(),this.defaultUniform=t;const e=H.fromValues(0,5,5),s=H.fromValues(0,0,0),a=H.fromValues(0,1,0),f=dt.create();dt.lookAt(f,e,s,a),this.matrix=f}name="uViewMatrix";tie(t){const e=this.findUniformInfo();this.location=e.location,this.update()}pos;obr(t){if(!this.pos)return;const e=Rn.create();Rn.subtract(e,t,this.pos),e[1]=-e[1],this.pos=t;const s=[100,100],a=this.matrix,f=H.fromValues(a[0],a[4],a[8]),o=H.fromValues(a[1],a[5],a[9]),d=H.fromValues(a[2],a[6],a[10]),p=Rn.length(e)/s[1]*Math.PI*2;Rn.normalize(e,e),H.normalize(f,f);for(let T=0;T<f.length;++T)f[T]*=e[0];H.normalize(o,o);for(let T=0;T<o.length;++T)o[T]*=e[1];const m=H.create();H.add(m,m,f),H.add(m,m,o);const x=H.clone(d);H.cross(x,x,m),H.normalize(x,x);const M=Ke.create();Ke.setAxisAngle(M,x,p);const S=this.defaultUniform.orbitPoint,A=H.clone(S);H.negate(A,A);const w=dt.create();dt.translate(w,w,S);const b=dt.create();dt.fromQuat(b,M),dt.multiply(w,w,b),dt.translate(w,w,A),dt.multiply(a,a,w),this.matrix=a,this.update()}wheel(t){if(!this.pos)return;const e=Rn.create();Rn.subtract(e,t,this.pos),e[1]=-e[1],this.pos=t;const s=[100,100],a=this.matrix,f=H.fromValues(a[0],a[4],a[8]),o=H.fromValues(a[1],a[5],a[9]),d=H.fromValues(a[2],a[6],a[10]),p=Rn.length(e)/s[1]*Math.PI*2;Rn.normalize(e,e),H.normalize(f,f);for(let T=0;T<f.length;++T)f[T]*=e[0];H.normalize(o,o);for(let T=0;T<o.length;++T)o[T]*=e[1];const m=H.create();H.add(m,m,f),H.add(m,m,o);const x=H.clone(d);H.cross(x,x,m),H.normalize(x,x);const M=Ke.create();Ke.setAxisAngle(M,x,p);const S=this.defaultUniform.orbitPoint,A=H.clone(S);H.negate(A,A);const w=dt.create();dt.translate(w,w,S);const b=dt.create();dt.fromQuat(b,M),dt.multiply(w,w,b),dt.translate(w,w,A),dt.multiply(a,a,w),this.matrix=a,this.update()}zoom(t){const e=this.matrix,s=H.fromValues(e[2],e[6],e[10]);H.normalize(s,s);const a=dt.create();dt.invert(a,e);const f=H.fromValues(a[12],a[13],a[14]),o=this.defaultUniform.orbitPoint,d=H.create();H.subtract(d,f,o);const p=H.length(d),m=.5,x=50;let M=p-t*p;if(M=Math.max(m,Math.min(x,M)),Math.abs(M-p)<.001)return;H.normalize(d,d);const S=H.create();H.scaleAndAdd(S,o,d,M);const A=H.fromValues(e[1],e[5],e[9]);H.normalize(A,A);const w=dt.create();dt.lookAt(w,S,o,A),this.matrix=w,this.update()}}var Qn;(Y=>{class t{static ZOOM_SPEED=.1;static ZoomIn(a){const f=In.current;if(!f)return;const o=a||this.ZOOM_SPEED;f.zoom(o)}static ZoomOut(a){const f=In.current;if(!f)return;const o=a||this.ZOOM_SPEED;f.zoom(-o)}static ZoomByWheel(a){const f=In.current;if(!f)return;const o=Math.abs(a)*.001;a>0?f.zoom(-o):f.zoom(o)}}Y.Zoom=t;class e{static update(a){In.current.obr(a)}}Y.Rotate=e})(Qn||(Qn={}));const lf=Qn.Rotate;class uf extends os{constructor(){super()}mousedown(t){const e=[t.clientX,t.clientY],s=In.current;return s.pos=e,null}mouseup(t){const e=In.current;return e.pos=void 0,super.mouseup(t)}mousemove(t){const e=[t.clientX,t.clientY];return lf.update(e),null}}class df{scene;constructor(t){this.scene=t}setFromCamera(t,e,s){const f=this.scene.context.canvas.getBoundingClientRect(),o=(t-f.left)/f.width*2-1,d=-((e-f.top)/f.height)*2+1,p=s.defaultUniform.projectMatrix.matrix,m=s.defaultUniform.viewMatrix.matrix,x={origin:H.create(),direction:H.create()},M=_e.fromValues(o,d,-1,1),S=dt.create();dt.invert(S,p);const A=_e.create();_e.transformMat4(A,M,S),A[2]=-1,A[3]=0;const w=dt.create();dt.invert(w,m);const b=_e.create();_e.transformMat4(b,A,w),H.normalize(x.direction,H.fromValues(b[0],b[1],b[2]));const T=H.fromValues(-m[12],-m[13],-m[14]);return H.copy(x.origin,T),x}intersectObjects(t,e){const s=[];for(const a of e){const f=this.intersectObject(t,a);f&&s.push(f)}return s.sort((a,f)=>a.distance-f.distance),s}intersectObject(t,e){const s=H.fromValues(0,0,0),a=1,f=H.create();H.subtract(f,t.origin,s);const o=H.dot(t.direction,t.direction),d=2*H.dot(f,t.direction),p=H.dot(f,f)-a*a,m=d*d-4*o*p;if(m<0)return null;const x=Math.sqrt(m),M=(-d-x)/(2*o),S=(-d+x)/(2*o);let A=M>0?M:S;if(A<=0)return null;const w=H.create();return H.scaleAndAdd(w,t.origin,t.direction,A),{object:e,distance:A,point:w}}getInteractableObjects(){return Array.from(this.scene)}}class jn{static instance;listeners=new Map;eventQueue=[];isProcessing=!1;constructor(){}static getInstance(){return jn.instance||(jn.instance=new jn),jn.instance}on(t,e){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e)}off(t,e){const s=this.listeners.get(t);s&&s.delete(e)}emit(t){this.eventQueue.push(t),this.isProcessing||this.processEventQueue()}processEventQueue(){for(this.isProcessing=!0;this.eventQueue.length>0;){const t=this.eventQueue.shift(),e=this.listeners.get(t.type);e&&e.forEach(s=>{try{s(t)}catch(a){console.error(`Error in event handler for ${t.type}:`,a)}})}this.isProcessing=!1}once(t,e){const s=a=>{e(a),this.off(t,s)};this.on(t,s)}removeAllListeners(t){t?this.listeners.delete(t):this.listeners.clear()}listenerCount(t){const e=this.listeners.get(t);return e?e.size:0}}var Yt=(Y=>(Y.MOUSE_DOWN="mousedown",Y.MOUSE_UP="mouseup",Y.MOUSE_MOVE="mousemove",Y.MOUSE_ENTER="mouseenter",Y.MOUSE_LEAVE="mouseleave",Y.MOUSE_WHEEL="wheel",Y.CLICK="click",Y.DOUBLE_CLICK="dblclick",Y.CONTEXT_MENU="contextmenu",Y.TOUCH_START="touchstart",Y.TOUCH_END="touchend",Y.TOUCH_MOVE="touchmove",Y.KEY_DOWN="keydown",Y.KEY_UP="keyup",Y.KEY_PRESS="keypress",Y))(Yt||{});class pf{scene;raycaster;eventManager;controller;constructor(t){this.scene=t,this.raycaster=new df(t),this.eventManager=jn.getInstance(),this.controller=t.controller}init(){const t=this.scene.context.canvas;if(!t){console.warn("Canvas not available, skipping interaction setup");return}t.addEventListener("mousedown",this.handleMouseDown.bind(this)),t.addEventListener("mouseup",this.handleMouseUp.bind(this)),t.addEventListener("mousemove",this.handleMouseMove.bind(this)),t.addEventListener("wheel",this.handleWheel.bind(this)),t.addEventListener("contextmenu",this.handleContextMenu.bind(this)),t.addEventListener("click",this.handleClick.bind(this)),t.addEventListener("dblclick",this.handleDoubleClick.bind(this)),t.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),t.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!1}),t.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),window.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("keyup",this.handleKeyUp.bind(this))}handleMouseDown(t){const e=this.createInteractionEvent(Yt.MOUSE_DOWN,t);this.performRaycast(e),this.eventManager.emit(e),this.controller.chain.mousedown(t),e.hitObject&&e.hitObject.emit("mousedown",e),this.scene.render()}handleMouseUp(t){const e=this.createInteractionEvent(Yt.MOUSE_UP,t);this.performRaycast(e),this.eventManager.emit(e),this.controller.chain.mouseup(t),e.hitObject&&e.hitObject.emit("mouseup",e)}handleMouseMove(t){const e=this.createInteractionEvent(Yt.MOUSE_MOVE,t);this.performRaycast(e),this.eventManager.emit(e),this.controller.chain.mousemove(t),e.hitObject&&e.hitObject.emit("mousemove",e),this.scene.render()}handleWheel(t){const e=this.createInteractionEvent(Yt.MOUSE_WHEEL,t);this.eventManager.emit(e),Qn.Zoom.ZoomByWheel(t.deltaY),this.scene.render(),t.preventDefault()}handleContextMenu(t){const e=this.createInteractionEvent(Yt.CONTEXT_MENU,t);this.performRaycast(e),this.eventManager.emit(e),t.preventDefault()}handleClick(t){const e=this.createInteractionEvent(Yt.CLICK,t);this.performRaycast(e),this.eventManager.emit(e),e.hitObject&&e.hitObject.emit("click",e)}handleDoubleClick(t){const e=this.createInteractionEvent(Yt.DOUBLE_CLICK,t);this.performRaycast(e),this.eventManager.emit(e),e.hitObject&&e.hitObject.emit("dblclick",e)}handleTouchStart(t){if(t.touches.length===0)return;const e=t.touches[0],s=this.createInteractionEventFromTouch(Yt.TOUCH_START,t,e);this.performRaycast(s),this.eventManager.emit(s),s.hitObject&&s.hitObject.emit("touchstart",s),t.preventDefault()}handleTouchEnd(t){if(t.changedTouches.length===0)return;const e=t.changedTouches[0],s=this.createInteractionEventFromTouch(Yt.TOUCH_END,t,e);this.performRaycast(s),this.eventManager.emit(s),s.hitObject&&s.hitObject.emit("touchend",s)}handleTouchMove(t){if(t.touches.length===0)return;const e=t.touches[0],s=this.createInteractionEventFromTouch(Yt.TOUCH_MOVE,t,e);this.performRaycast(s),this.eventManager.emit(s),s.hitObject&&s.hitObject.emit("touchmove",s),this.scene.render(),t.preventDefault()}handleKeyDown(t){const e=this.createInteractionEvent(Yt.KEY_DOWN,t);switch(this.eventManager.emit(e),t.key){case"+":case"=":case"PageUp":Qn.Zoom.ZoomIn(),this.scene.render(),t.preventDefault();break;case"-":case"_":case"PageDown":Qn.Zoom.ZoomOut(),this.scene.render(),t.preventDefault();break}}handleKeyUp(t){const e=this.createInteractionEvent(Yt.KEY_UP,t);this.eventManager.emit(e)}performRaycast(t){try{const e=this.raycaster.setFromCamera(t.clientX,t.clientY,this.scene.camera),s=this.raycaster.getInteractableObjects(),a=this.raycaster.intersectObjects(e,s);if(a.length>0){const f=a[0];t.hitObject=f.object,t.hitDistance=f.distance,t.hitPoint=f.point,f.point&&(t.worldPosition=H.clone(f.point))}}catch(e){console.warn("Raycast failed:",e)}}createInteractionEvent(t,e){const a=this.scene.context.canvas.getBoundingClientRect();let f=0,o=0,d=0,p=0,m;return(e instanceof MouseEvent||e instanceof WheelEvent)&&(f=e.clientX,o=e.clientY,d=e.clientX-a.left,p=e.clientY-a.top,m=e instanceof MouseEvent?e.button:void 0),{type:t,originalEvent:e,screenX:d,screenY:p,clientX:f,clientY:o,button:m,ctrlKey:e.ctrlKey||!1,shiftKey:e.shiftKey||!1,altKey:e.altKey||!1,metaKey:e.metaKey||!1}}createInteractionEventFromTouch(t,e,s){const f=this.scene.context.canvas.getBoundingClientRect();return{type:t,originalEvent:e,screenX:s.clientX-f.left,screenY:s.clientY-f.top,clientX:s.clientX,clientY:s.clientY,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}}}class gf{scene;chain;cameraChain;interactionController=null;constructor(){}init(t){this.scene=t,this.chain=new cf,this.cameraChain=new uf,this.switchState(0),this.interactionController=new pf(t),this.interactionController.init()}switchState(t){t===0&&this.transitionTo(new sf)}state;transitionTo(t){this.state=t,this.state.setContext(this),this.state.start()}}class mf extends ve{constructor(){super();const t=this.matrix;dt.translate(t,t,[0,0,0]),this.matrix=t}name="uModelMatrix";tie(t){const e=this.findUniformInfo();this.location=e.location,this.update()}}class xf extends ve{constructor(){super();const t=fs.gl,e=45*Math.PI/180,s=t.canvas.width/t.canvas.height,a=.1,f=100,o=dt.create();dt.perspectiveNO(o,e,s,a,f),this.matrix=o}name="uProjectionMatrix";tie(t){this.location=this.findUniformInfo().location,this.update()}}class _f extends ve{name="uCameraPosition";position=H.create();viewMatrix;constructor(t){super(),this.viewMatrix=t,H.set(this.position,0,5,5)}update(){const t=dt.create();dt.invert(t,this.viewMatrix.matrix),H.set(this.position,t[12],t[13],t[14])}tie(t){const e=this.findUniformInfo();if(!e)return;this.location=e.location,this.update(),t.uniform3fv(this.location,this.position)}}class vf extends hf{modelMatrix;viewMatrix;projectMatrix;normalMatrix;cameraPosition;orbitPoint;viewportSize;constructor(){super(),this.projectMatrix=new xf,this.viewMatrix=new In(this),this.modelMatrix=new mf,this.normalMatrix=new of(this.modelMatrix),this.cameraPosition=new _f(this.viewMatrix),this.orbitPoint=H.create(),this.add(this.modelMatrix),this.add(this.viewMatrix),this.add(this.projectMatrix),this.add(this.normalMatrix),this.add(this.cameraPosition),In.current=this.viewMatrix}}class Mf{defaultUniform;scene;constructor(t){this.scene=t,this.defaultUniform=new vf}update(){this.scene.render()}}class yf extends nf{context;constructor(){super()}background=new ef;model=new ka;camera;controller=new gf;mount(t){this.context=new Va(t),this.init()}init(){this.camera=new Mf(this),this.controller.init(this)}get gl(){return this.context?.gl}build(){super.build(this.gl)}render(){super.render(this.gl)}add(t){this.push(t)}getInteractableObjects(){return Array.from(this)}}kn.Scene=yf,Object.defineProperty(kn,Symbol.toStringTag,{value:"Module"})}));
